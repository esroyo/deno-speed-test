{"mappings":"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","names":["require_fetch_umd","__commonJSMin","exports","module","global","factory","g","support","e","isDataView","obj","viewClasses","isArrayBufferView","normalizeName","name","normalizeValue","value","iteratorFor","items","iterator","Headers","headers","header","oldValue","callback","thisArg","consumed","body","fileReaderReady","reader","resolve","reject","readBlobAsArrayBuffer","blob","promise","readBlobAsText","match","encoding","readArrayBufferAsText","buf","view","chars","i","bufferClone","Body","rejected","isConsumed","decode","methods","normalizeMethod","method","upcased","Request","input","options","ctrl","reParamSearch","reQueryString","form","bytes","split","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","error","Response","bodyInit","response","redirectStatuses","url","status","err","message","fetch","init","request","xhr","abortXhr","fixUrl","names","require_fetch_npm_browserify","__commonJSMin","exports","module","require_lodash","__commonJSMin","exports","module","FUNC_ERROR_TEXT","HASH_UNDEFINED","funcTag","genTag","reRegExpChar","reIsHostCtor","freeGlobal","freeSelf","root","getValue","object","key","isHostObject","value","result","e","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","funcToString","hasOwnProperty","objectToString","reIsNative","splice","Map","getNative","nativeCreate","Hash","entries","index","length","entry","hashClear","hashDelete","hashGet","data","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","array","eq","baseIsNative","isObject","isMasked","pattern","isFunction","toSource","map","isKeyable","type","func","memoize","resolver","memoized","args","cache","other","tag","import_isomorphic_fetch","import_lodash","ascending","a","b","descending","a","b","bisector","f","compare1","compare2","delta","ascending","d","x","descending","zero","left","a","lo","hi","mid","right","center","i","number","x","ascendingBisect","bisector","ascending","bisectRight","bisectLeft","bisectCenter","number","bisect_default","initRange","domain","range","threshold","domain","range","unknown","n","scale","x","bisect_default","_","y","i","initRange","_arrayLikeToArray","r","a","e","n","_arrayWithHoles","_arrayWithoutHoles","_assertClassBrand","_assertThisInitialized","_callSuper","t","o","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","_checkPrivateRedeclaration","_classCallCheck","_classPrivateFieldGet2","s","_classPrivateFieldInitSpec","_classPrivateFieldSet2","_classPrivateMethodInitSpec","_defineProperties","_toPropertyKey","_createClass","_defineProperty","_get","p","_superPropBase","_inherits","_setPrototypeOf","_iterableToArray","_iterableToArrayLimit","l","i","u","f","_nonIterableRest","_nonIterableSpread","ownKeys","_objectSpread2","_objectWithoutProperties","_objectWithoutPropertiesLoose","set","_set","_slicedToArray","_unsupportedIterableToArray","_superPropGet","_superPropSet","_toConsumableArray","_toPrimitive","REL_API_URL","defaultConfig","internalConfig","threshold","MAX_RETRIES","ESTIMATED_HEADER_FRACTION","cfGetServerTime","serverTiming","re","getTtfb","perf","gePayloadDownload","calcDownloadDuration","_ref","ping","payloadDownloadTime","calcUploadDuration","_ref2","ttfb","calcDownloadSpeed","_ref3","numBytes","duration","transferSize","bits","secs","calcUploadSpeed","_ref4","genContent","memoize","_qsParams","_fetchOptions","_responseHook","_onRunningChange","_onNewMeasurementStarted","_onMeasurementResult","_onFinished$1","_onConnectionError$1","_measurements","_downloadApi","_uploadApi","_running$2","_finished$1","_results$1","_measIdx","_counter","_retries","_minDuration","_throttleMs","_estimatedServerTime","_currentFetchPromise","_currentNextMsmTimeoutId","_BandwidthMeasurementEngine_brand","BandwidthMeasurementEngine","_measurements2","_ref5","downloadApiUrl","uploadApiUrl","_ref5$throttleMs","throttleMs","_ref5$estimatedServer","estimatedServerTime","v","_cancelCurrentMeasurement","_setRunning$2","_nextMeasurement","running","_this","_saveMeasurementResults","measIdx","measTiming","_this2","_classPrivateFieldGet2$1","bytes","dir","results","bytesResult","_ref6","b","m","agg","cnt","_this3","measurements","meas","finished","_dir","_meas","isDown","apiUrl","qsParams","url","_ref7","_ref8","k","fetchOpt","serverTime","curPromise","body","_","reject","timing","reqSize","requestDuration","error","_this$retries","_this$retries2","_excluded$5","_latencyEngine","_latencyTimeout","_BandwidthWithParallelLatencyEngine_brand","BandwidthWithParallelLatencyEngine","_BandwidthEngine","_ref$measureParallelL","measureParallelLatency","_ref$parallelLatencyT","parallelLatencyThrottleMs","_ref$estimatedServerT","ptProps","_setLatencyRunning","res","fetchOptions","onRunningChange","onConnectionError","_this4","_excluded$4","_measurementId$1","_token","_requestTime","_logApiUrl","_LoggingBandwidthEngine_brand","LoggingBandwidthEngine","measurementId","logApiUrl","_loggingResponseHook","_logMeasurement","responseHook","onMeasurementResult","_len","restArgs","_key","measData","logData","_running$1","_currentPromise","_promiseFn","_PromiseEngine_brand","PromiseEngine","promiseFn","_cancelCurrent","_setRunning$1","_next$1","_engines","LoadNetworkEngine","download","upload","cfg","type","chunkSize","getLoadEngine","_ref6$qsParams","_ref6$fetchOptions","fetchQsParams","engine","_excluded$3","_established","_sender","_receiver","_senderDc","_receiverDc","SelfWebRtcDataConnection","_ref$iceServers","iceServers","_ref$acceptIceCandida","acceptIceCandidate","candidate","protocol","sdpAttrs","_ref$dataChannelCfg","dataChannelCfg","rtcPeerConnectionCfg","sender","receiver","senderDc","dc","msg","offer","answer","_onCredentialsFailure","_onConnectionError","_onFinished","_msgTracker","_webRtcConnection","_numMsgs","PacketLossEngine","turnServerUri","turnServerCredsApi","_ref$turnServerCredsA","turnServerCredsApiParser","username","credential","server","_ref$turnServerCredsA2","turnServerCredsApiIncludeCredentials","turnServerUser","turnServerPass","_ref$numMsgs","numMsgs","_ref$batchSize","batchSize","_ref$batchWaitTime","batchWaitTime","_ref$responsesWaitTim","responsesWaitTime","_ref$connectionTimeou","connectionTimeout","d","credsApiTurnServerUri","c","connectionSuccess","msgTracker","self","sendNum","finishFn","finishTimeout","missingMsgs","recv","totalMessages","numMessagesSent","lostMessages","packetLoss","_excluded$2","_loadEngine","PacketLossUnderLoadEngine","_PacketLossEngine","downloadChunkSize","uploadChunkSize","onCredentialsFailure","onFinished","_excluded$1","ReachabilityEngine","targetUrl","_ref$timeout","timeout","_ref$fetchOptions","finish","reachable","rest","response","sum","vals","val","percentile","perc","sortedVals","idx","rem","edges","rndFn","_config$3","_extractLoadedLatencies","MeasurementCalculations","config","latencyResults","bandwidthResults","timings","bps","measTime","loadedResults","plResults","reachabilityResults","pings","latency","_ref4$sumDeltas","sumDeltas","prevLatency","classificationNames","customResultTypes","defaultPoints","_config$2","ScoresCalculations","scores","fn","input","_ref8$","pointThresholds","sumPoints","classificationIdx","classificationName","_config$1","_measCalc","_scoresCalc","_calcGetter","_getV4Reachability","_getV4ReachabilityDetails","_getV6Reachability","_getV6ReachabilityDetails","Results","calcFn","resKey","defaultVal","surfaceError","items","key","round","num","decimals","latencyPointsParser","durations","bpsPointsParser","pnts","packetLossParser","resultsParsers","scoreParser","logAimResults","logK","_ref3$","_ref3$$","parser","score","_excluded","_excluded2","_excluded3","DEFAULT_OPTIMAL_DOWNLOAD_SIZE","DEFAULT_OPTIMAL_UPLOAD_SIZE","OPTIMAL_SIZE_RATIO","pausableTypes","genMeasId","_onFinish","_onError","_config","_results","_measurementId","_curMsmIdx","_curEngine","_optimalDownloadChunkSize","_optimalUploadChunkSize","_running","_finished","_MeasurementEngine_brand","MeasurementEngine","userConfig","_curType","_setRunning","_next","_clear","_setFinished","_curTypeResults","_destroyCurEngine","_this$curMsmIdx","msmConfig","msmResults","_classPrivateFieldGet3","result","ptCfg","_classPrivateFieldGet4","includeCredentials","count","isLastMsmOfType","minDuration","reachedEndOfMsmType","largestSize","optimalSize","_logAimApiUrl","_logFinalResults","LoggingMeasurementEngine","_MeasurementEngine2","pt","onFinish"],"sources":["../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/whatwg-fetch/dist/fetch.umd.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/isomorphic-fetch/fetch-npm-browserify.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/lodash.memoize/index.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/@cloudflare/speedtest/dist/speedtest.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-array/src/ascending.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-array/src/descending.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-array/src/bisector.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-array/src/number.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-array/src/bisect.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-scale/src/init.js","../esm/npm/@cloudflare/speedtest@1.6.0/node_modules/d3-scale/src/threshold.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' \u0026\u0026 typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' \u0026\u0026 define.amd ? define(['exports'], factory) :\n  (factory((global.WHATWGFetch = {})));\n}(this, (function (exports) { 'use strict';\n\n  /* eslint-disable no-prototype-builtins */\n  var g =\n    (typeof globalThis !== 'undefined' \u0026\u0026 globalThis) ||\n    (typeof self !== 'undefined' \u0026\u0026 self) ||\n    // eslint-disable-next-line no-undef\n    (typeof global !== 'undefined' \u0026\u0026 global) ||\n    {};\n\n  var support = {\n    searchParams: 'URLSearchParams' in g,\n    iterable: 'Symbol' in g \u0026\u0026 'iterator' in Symbol,\n    blob:\n      'FileReader' in g \u0026\u0026\n      'Blob' in g \u0026\u0026\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in g,\n    arrayBuffer: 'ArrayBuffer' in g\n  };\n\n  function isDataView(obj) {\n    return obj \u0026\u0026 DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj \u0026\u0026 viewClasses.indexOf(Object.prototype.toString.call(obj)) \u003e -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%\u0026'*+.^_`|~!]/i.test(name) || name === '') {\n      throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        if (header.length != 2) {\n          throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)\n        }\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body._noBody) return\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type);\n    var encoding = match ? match[1] : 'utf-8';\n    reader.readAsText(blob, encoding);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i \u003c view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      /*\n        fetch-mock wraps the Response object in an ES6 Proxy to\n        provide useful test harness features such as flush. However, on\n        ES5 browsers without fetch or Proxy support pollyfills must be used;\n        the proxy-pollyfill is unable to proxy an attribute unless it exists\n        on the object before the Proxy is created. This change ensures\n        Response.bodyUsed exists on the instance, while maintaining the\n        semantic of setting Request.bodyUsed in the constructor before\n        _initBody is called.\n      */\n      // eslint-disable-next-line no-self-assign\n      this.bodyUsed = this.bodyUsed;\n      this._bodyInit = body;\n      if (!body) {\n        this._noBody = true;\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob \u0026\u0026 Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData \u0026\u0026 FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams \u0026\u0026 URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer \u0026\u0026 support.blob \u0026\u0026 isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer \u0026\u0026 (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob \u0026\u0026 this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams \u0026\u0026 URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this);\n        if (isConsumed) {\n          return isConsumed\n        } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else if (support.blob) {\n        return this.blob().then(readBlobAsArrayBuffer)\n      } else {\n        throw new Error('could not read as ArrayBuffer')\n      }\n    };\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) \u003e -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    if (!(this instanceof Request)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body \u0026\u0026 input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal || (function () {\n      if ('AbortController' in g) {\n        var ctrl = new AbortController();\n        return ctrl.signal;\n      }\n    }());\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') \u0026\u0026 body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n\n    if (this.method === 'GET' || this.method === 'HEAD') {\n      if (options.cache === 'no-store' || options.cache === 'no-cache') {\n        // Search for a '_' parameter in the query string\n        var reParamSearch = /([?\u0026])_=[^\u0026]*/;\n        if (reParamSearch.test(this.url)) {\n          // If it already exists then set the value with the current time\n          this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n        } else {\n          // Otherwise add a new '_' parameter to the end with the current time\n          var reQueryString = /\\?/;\n          this.url += (reQueryString.test(this.url) ? '\u0026' : '?') + '_=' + new Date().getTime();\n        }\n      }\n    }\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('\u0026')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n    // https://github.com/github/fetch/issues/748\n    // https://github.com/zloirock/core-js/issues/751\n    preProcessedHeaders\n      .split('\\r')\n      .map(function(header) {\n        return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n      })\n      .forEach(function(line) {\n        var parts = line.split(':');\n        var key = parts.shift().trim();\n        if (key) {\n          var value = parts.join(':').trim();\n          try {\n            headers.append(key, value);\n          } catch (error) {\n            console.warn('Response ' + error.message);\n          }\n        }\n      });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!(this instanceof Response)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    if (this.status \u003c 200 || this.status \u003e 599) {\n      throw new RangeError(\"Failed to construct 'Response': The status provided (0) is outside the range [200, 599].\")\n    }\n    this.ok = this.status \u003e= 200 \u0026\u0026 this.status \u003c 300;\n    this.statusText = options.statusText === undefined ? '' : '' + options.statusText;\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 200, statusText: ''});\n    response.ok = false;\n    response.status = 0;\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = g.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal \u0026\u0026 request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        // This check if specifically for when a user fetches a file locally from the file system\n        // Only if the status is out of a normal range\n        if (request.url.indexOf('file://') === 0 \u0026\u0026 (xhr.status \u003c 200 || xhr.status \u003e 599)) {\n          options.status = 200;\n        } else {\n          options.status = xhr.status;\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        setTimeout(function() {\n          resolve(new Response(body, options));\n        }, 0);\n      };\n\n      xhr.onerror = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request failed'));\n        }, 0);\n      };\n\n      xhr.ontimeout = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request timed out'));\n        }, 0);\n      };\n\n      xhr.onabort = function() {\n        setTimeout(function() {\n          reject(new exports.DOMException('Aborted', 'AbortError'));\n        }, 0);\n      };\n\n      function fixUrl(url) {\n        try {\n          return url === '' \u0026\u0026 g.location.href ? g.location.href : url\n        } catch (e) {\n          return url\n        }\n      }\n\n      xhr.open(request.method, fixUrl(request.url), true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr) {\n        if (support.blob) {\n          xhr.responseType = 'blob';\n        } else if (\n          support.arrayBuffer\n        ) {\n          xhr.responseType = 'arraybuffer';\n        }\n      }\n\n      if (init \u0026\u0026 typeof init.headers === 'object' \u0026\u0026 !(init.headers instanceof Headers || (g.Headers \u0026\u0026 init.headers instanceof g.Headers))) {\n        var names = [];\n        Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n          names.push(normalizeName(name));\n          xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n        });\n        request.headers.forEach(function(value, name) {\n          if (names.indexOf(name) === -1) {\n            xhr.setRequestHeader(name, value);\n          }\n        });\n      } else {\n        request.headers.forEach(function(value, name) {\n          xhr.setRequestHeader(name, value);\n        });\n      }\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!g.fetch) {\n    g.fetch = fetch;\n    g.Headers = Headers;\n    g.Request = Request;\n    g.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","/**\n * lodash (Custom Build) \u003chttps://lodash.com/\u003e\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors \u003chttps://jquery.org/\u003e\n * Released under MIT license \u003chttps://lodash.com/license\u003e\n * Based on Underscore.js 1.8.3 \u003chttp://underscorejs.org/LICENSE\u003e\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters \u0026 Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' \u0026\u0026 global \u0026\u0026 global.Object === Object \u0026\u0026 global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' \u0026\u0026 self \u0026\u0026 self.Object === Object \u0026\u0026 self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE \u003c 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null \u0026\u0026 typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData \u0026\u0026 coreJsData.keys \u0026\u0026 coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$\u0026')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index \u003c length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) \u0026\u0026 delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate \u0026\u0026 value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index \u003c length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index \u003c 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index \u003c 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) \u003e -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index \u003c 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index \u003c length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey \u0026\u0026 (maskSrcKey in func);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // =\u003e [1, 2]\n *\n * values(other);\n * // =\u003e [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // =\u003e [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // =\u003e ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver \u0026\u0026 typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // =\u003e true\n *\n * _.eq(object, other);\n * // =\u003e false\n *\n * _.eq('a', 'a');\n * // =\u003e true\n *\n * _.eq('a', Object('a'));\n * // =\u003e false\n *\n * _.eq(NaN, NaN);\n * // =\u003e true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value \u0026\u0026 other !== other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // =\u003e true\n *\n * _.isFunction(/abc/);\n * // =\u003e false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // =\u003e true\n *\n * _.isObject([1, 2, 3]);\n * // =\u003e true\n *\n * _.isObject(_.noop);\n * // =\u003e true\n *\n * _.isObject(null);\n * // =\u003e false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value \u0026\u0026 (type == 'object' || type == 'function');\n}\n\nmodule.exports = memoize;\n","import 'isomorphic-fetch';\nimport memoize from 'lodash.memoize';\nimport { scaleThreshold } from 'd3-scale';\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a \u003e r.length) \u0026\u0026 (a = r.length);\n  for (var e = 0, n = Array(a); e \u003c a; e++) n[e] = r[e];\n  return n;\n}\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\nfunction _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length \u003c 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nfunction _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nfunction _callSuper(t, o, e) {\n  return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nfunction _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _classPrivateFieldGet2(s, a) {\n  return s.get(_assertClassBrand(s, a));\n}\nfunction _classPrivateFieldInitSpec(e, t, a) {\n  _checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nfunction _classPrivateFieldSet2(s, a, r) {\n  return s.set(_assertClassBrand(s, a), r), r;\n}\nfunction _classPrivateMethodInitSpec(e, a) {\n  _checkPrivateRedeclaration(e, a), a.add(e);\n}\nfunction _defineProperties(e, r) {\n  for (var t = 0; t \u003c r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || false, o.configurable = true, \"value\" in o \u0026\u0026 (o.writable = true), Object.defineProperty(e, _toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r \u0026\u0026 _defineProperties(e.prototype, r), Object.defineProperty(e, \"prototype\", {\n    writable: false\n  }), e;\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: true,\n    configurable: true,\n    writable: true\n  }) : e[r] = t, e;\n}\nfunction _get() {\n  return _get = \"undefined\" != typeof Reflect \u0026\u0026 Reflect.get ? Reflect.get.bind() : function (e, t, r) {\n    var p = _superPropBase(e, t);\n    if (p) {\n      var n = Object.getOwnPropertyDescriptor(p, t);\n      return n.get ? n.get.call(arguments.length \u003c 3 ? e : r) : n.value;\n    }\n  }, _get.apply(null, arguments);\n}\nfunction _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e \u0026\u0026 null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e \u0026\u0026 e.prototype, {\n    constructor: {\n      value: t,\n      writable: true,\n      configurable: true\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: false\n  }), e \u0026\u0026 _setPrototypeOf(t, e);\n}\nfunction _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function () {\n    return !!t;\n  })();\n}\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol \u0026\u0026 null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol \u0026\u0026 r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = true,\n      o = false;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) \u0026\u0026 (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = true, n = r;\n    } finally {\n      try {\n        if (!f \u0026\u0026 null != t.return \u0026\u0026 (u = t.return(), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r \u0026\u0026 (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r \u003c arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), true).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = _objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r \u003c n.length; r++) o = n[r], -1 === t.indexOf(o) \u0026\u0026 {}.propertyIsEnumerable.call(e, o) \u0026\u0026 (i[o] = e[o]);\n  }\n  return i;\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nfunction _possibleConstructorReturn(t, e) {\n  if (e \u0026\u0026 (\"object\" == typeof e || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return _assertThisInitialized(t);\n}\nfunction set(e, r, t, o) {\n  return set = \"undefined\" != typeof Reflect \u0026\u0026 Reflect.set ? Reflect.set : function (e, r, t, o) {\n    var f,\n      i = _superPropBase(e, r);\n    if (i) {\n      if ((f = Object.getOwnPropertyDescriptor(i, r)).set) return f.set.call(o, t), true;\n      if (!f.writable) return false;\n    }\n    if (f = Object.getOwnPropertyDescriptor(o, r)) {\n      if (!f.writable) return false;\n      f.value = t, Object.defineProperty(o, r, f);\n    } else _defineProperty(o, r, t);\n    return true;\n  }, set(e, r, t, o);\n}\nfunction _set(e, r, t, o, f) {\n  if (!set(e, r, t, o || e) \u0026\u0026 f) throw new TypeError(\"failed to set property\");\n  return t;\n}\nfunction _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\nfunction _superPropBase(t, o) {\n  for (; !{}.hasOwnProperty.call(t, o) \u0026\u0026 null !== (t = _getPrototypeOf(t)););\n  return t;\n}\nfunction _superPropGet(t, o, e, r) {\n  var p = _get(_getPrototypeOf(t.prototype ), o, e);\n  return 2 \u0026 r \u0026\u0026 \"function\" == typeof p ? function (t) {\n    return p.apply(e, t);\n  } : p;\n}\nfunction _superPropSet(t, e, o, r, p, f) {\n  return _set(_getPrototypeOf(t.prototype ), e, o, r, p);\n}\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r);\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (String )(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t \u0026\u0026 r.constructor \u0026\u0026 (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nvar REL_API_URL = 'https://speed.cloudflare.com';\nvar defaultConfig = {\n  // Engine\n  autoStart: true,\n  // APIs\n  downloadApiUrl: \"\".concat(REL_API_URL, \"/__down\"),\n  uploadApiUrl: \"\".concat(REL_API_URL, \"/__up\"),\n  logMeasurementApiUrl: null,\n  logAimApiUrl: 'https://aim.cloudflare.com/__log',\n  turnServerUri: 'turn.speed.cloudflare.com:50000',\n  turnServerCredsApiUrl: \"\".concat(REL_API_URL, \"/turn-creds\"),\n  turnServerUser: null,\n  turnServerPass: null,\n  rpkiInvalidHost: 'invalid.rpki.cloudflare.com',\n  cfTraceUrl: \"\".concat(REL_API_URL, \"/cdn-cgi/trace\"),\n  includeCredentials: false,\n  // Measurements\n  measurements: [{\n    type: 'latency',\n    numPackets: 1\n  },\n  // initial ttfb estimation\n  {\n    type: 'download',\n    bytes: 1e5,\n    count: 1,\n    bypassMinDuration: true\n  },\n  // initial download estimation\n  {\n    type: 'latency',\n    numPackets: 20\n  }, {\n    type: 'download',\n    bytes: 1e5,\n    count: 9\n  }, {\n    type: 'download',\n    bytes: 1e6,\n    count: 8\n  }, {\n    type: 'upload',\n    bytes: 1e5,\n    count: 8\n  }, {\n    type: 'packetLoss',\n    numPackets: 1e3,\n    batchSize: 10,\n    batchWaitTime: 10,\n    // ms (in between batches)\n    responsesWaitTime: 3000 // ms (silent time after last sent msg)\n  }, {\n    type: 'upload',\n    bytes: 1e6,\n    count: 6\n  }, {\n    type: 'download',\n    bytes: 1e7,\n    count: 6\n  }, {\n    type: 'upload',\n    bytes: 1e7,\n    count: 4\n  }, {\n    type: 'download',\n    bytes: 2.5e7,\n    count: 4\n  }, {\n    type: 'upload',\n    bytes: 2.5e7,\n    count: 4\n  }, {\n    type: 'download',\n    bytes: 1e8,\n    count: 3\n  }, {\n    type: 'upload',\n    bytes: 5e7,\n    count: 3\n  }, {\n    type: 'download',\n    bytes: 2.5e8,\n    count: 2\n  }],\n  measureDownloadLoadedLatency: true,\n  measureUploadLoadedLatency: true,\n  loadedLatencyThrottle: 400,\n  // ms in between loaded latency requests\n  bandwidthFinishRequestDuration: 1000,\n  // download/upload duration (ms) to reach for stopping further measurements\n  estimatedServerTime: 10,\n  // ms to discount from latency calculation (if not present in response headers)\n\n  // Result interpretation\n  latencyPercentile: 0.5,\n  // Percentile used to calculate latency from a set of measurements\n  bandwidthPercentile: 0.9,\n  // Percentile used to calculate bandwidth from a set of measurements\n  bandwidthMinRequestDuration: 10,\n  // minimum duration (ms) to consider a measurement good enough to use in bandwidth calculation\n  loadedRequestMinDuration: 250,\n  // minimum duration (ms) of a request to consider it to be loading the connection\n  loadedLatencyMaxPoints: 20 // number of data points to keep for loaded latency\n};\n\nvar internalConfig = {\n  // AIM\n  aimMeasurementScoring: {\n    packetLoss: scaleThreshold([0.01, 0.05, 0.25, 0.5], [10, 5, 0, -10, -20]),\n    latency: scaleThreshold([10, 20, 50, 100, 500], [20, 10, 5, 0, -10, -20]),\n    loadedLatencyIncrease: scaleThreshold([10, 20, 50, 100, 500], [20, 10, 5, 0, -10, -20]),\n    jitter: scaleThreshold([10, 20, 100, 500], [10, 5, 0, -10, -20]),\n    download: scaleThreshold([1e6, 10e6, 50e6, 100e6], [0, 5, 10, 20, 30]),\n    upload: scaleThreshold([1e6, 10e6, 50e6, 100e6], [0, 5, 10, 20, 30])\n  },\n  aimExperiencesDefs: {\n    streaming: {\n      input: ['latency', 'packetLoss', 'download', 'loadedLatencyIncrease'],\n      pointThresholds: [15, 20, 40, 60]\n    },\n    gaming: {\n      input: ['latency', 'packetLoss', 'loadedLatencyIncrease'],\n      pointThresholds: [5, 15, 25, 30]\n    },\n    rtc: {\n      input: ['latency', 'jitter', 'packetLoss', 'loadedLatencyIncrease'],\n      pointThresholds: [5, 15, 25, 40]\n    }\n  }\n};\n\nvar MAX_RETRIES = 20;\nvar ESTIMATED_HEADER_FRACTION = 0.005; // ~.5% of packet header / payload size. used when transferSize is not available.\n\nvar cfGetServerTime = function cfGetServerTime(r) {\n  // extract server-timing from headers: server-timing: cfRequestDuration;dur=15.999794\n  var serverTiming = r.headers.get(\"server-timing\");\n  if (serverTiming) {\n    var re = serverTiming.match(/dur=([0-9.]+)/);\n    if (re) return +re[1];\n  }\n};\nvar getTtfb = function getTtfb(perf) {\n  return perf.responseStart - perf.requestStart;\n};\nvar gePayloadDownload = function gePayloadDownload(perf) {\n  return perf.responseEnd - perf.responseStart;\n}; // min 1ms\n\nvar calcDownloadDuration = function calcDownloadDuration(_ref) {\n  var ping = _ref.ping,\n    payloadDownloadTime = _ref.payloadDownloadTime;\n  return ping + payloadDownloadTime;\n}; // request duration excluding server time\n\nvar calcUploadDuration = function calcUploadDuration(_ref2) {\n  var ttfb = _ref2.ttfb;\n  return ttfb;\n};\nvar calcDownloadSpeed = function calcDownloadSpeed(_ref3, numBytes) {\n  var duration = _ref3.duration,\n    transferSize = _ref3.transferSize;\n  // use transferSize if available. if estimating from numBytes, add ~0.5% of headers.\n  var bits = 8 * (transferSize || +numBytes * (1 + ESTIMATED_HEADER_FRACTION));\n  var secs = duration / 1000;\n  return !secs ? undefined : bits / secs;\n};\nvar calcUploadSpeed = function calcUploadSpeed(_ref4, numBytes) {\n  var duration = _ref4.duration;\n  var bits = 8 * numBytes * (1 + ESTIMATED_HEADER_FRACTION); // take into account estimated packet headers\n  var secs = duration / 1000; // subtract estimated server time\n\n  return !secs ? undefined : bits / secs;\n};\nvar genContent = memoize(function (numBytes) {\n  return '0'.repeat(numBytes);\n});\n\n//\nvar _qsParams = /*#__PURE__*/new WeakMap();\nvar _fetchOptions = /*#__PURE__*/new WeakMap();\nvar _responseHook = /*#__PURE__*/new WeakMap();\nvar _onRunningChange = /*#__PURE__*/new WeakMap();\nvar _onNewMeasurementStarted = /*#__PURE__*/new WeakMap();\nvar _onMeasurementResult = /*#__PURE__*/new WeakMap();\nvar _onFinished$1 = /*#__PURE__*/new WeakMap();\nvar _onConnectionError$1 = /*#__PURE__*/new WeakMap();\nvar _measurements = /*#__PURE__*/new WeakMap();\nvar _downloadApi = /*#__PURE__*/new WeakMap();\nvar _uploadApi = /*#__PURE__*/new WeakMap();\nvar _running$2 = /*#__PURE__*/new WeakMap();\nvar _finished$1 = /*#__PURE__*/new WeakMap();\nvar _results$1 = /*#__PURE__*/new WeakMap();\nvar _measIdx = /*#__PURE__*/new WeakMap();\nvar _counter = /*#__PURE__*/new WeakMap();\nvar _retries = /*#__PURE__*/new WeakMap();\nvar _minDuration = /*#__PURE__*/new WeakMap();\nvar _throttleMs = /*#__PURE__*/new WeakMap();\nvar _estimatedServerTime = /*#__PURE__*/new WeakMap();\nvar _currentFetchPromise = /*#__PURE__*/new WeakMap();\nvar _currentNextMsmTimeoutId = /*#__PURE__*/new WeakMap();\nvar _BandwidthMeasurementEngine_brand = /*#__PURE__*/new WeakSet();\nvar BandwidthMeasurementEngine = /*#__PURE__*/function () {\n  function BandwidthMeasurementEngine(_measurements2) {\n    var _ref5 = arguments.length \u003e 1 \u0026\u0026 arguments[1] !== undefined ? arguments[1] : {},\n      downloadApiUrl = _ref5.downloadApiUrl,\n      uploadApiUrl = _ref5.uploadApiUrl,\n      _ref5$throttleMs = _ref5.throttleMs,\n      throttleMs = _ref5$throttleMs === void 0 ? 0 : _ref5$throttleMs,\n      _ref5$estimatedServer = _ref5.estimatedServerTime,\n      estimatedServerTime = _ref5$estimatedServer === void 0 ? 0 : _ref5$estimatedServer;\n    _classCallCheck(this, BandwidthMeasurementEngine);\n    // Internal methods\n    _classPrivateMethodInitSpec(this, _BandwidthMeasurementEngine_brand);\n    _classPrivateFieldInitSpec(this, _qsParams, {});\n    _classPrivateFieldInitSpec(this, _fetchOptions, {});\n    _defineProperty(this, \"finishRequestDuration\", 1000);\n    // download/upload duration (ms) to reach for stopping further measurements\n    _defineProperty(this, \"getServerTime\", cfGetServerTime);\n    // method to extract server time from response\n\n    _classPrivateFieldInitSpec(this, _responseHook, function (r) {\n      return r;\n    });\n    _classPrivateFieldInitSpec(this, _onRunningChange, function () {});\n    _classPrivateFieldInitSpec(this, _onNewMeasurementStarted, function () {});\n    _classPrivateFieldInitSpec(this, _onMeasurementResult, function () {});\n    _classPrivateFieldInitSpec(this, _onFinished$1, function () {});\n    _classPrivateFieldInitSpec(this, _onConnectionError$1, function () {});\n    // Internal state\n    _classPrivateFieldInitSpec(this, _measurements, void 0);\n    _classPrivateFieldInitSpec(this, _downloadApi, void 0);\n    _classPrivateFieldInitSpec(this, _uploadApi, void 0);\n    _classPrivateFieldInitSpec(this, _running$2, false);\n    _classPrivateFieldInitSpec(this, _finished$1, {\n      down: false,\n      up: false\n    });\n    _classPrivateFieldInitSpec(this, _results$1, {\n      down: {},\n      up: {}\n    });\n    _classPrivateFieldInitSpec(this, _measIdx, 0);\n    _classPrivateFieldInitSpec(this, _counter, 0);\n    _classPrivateFieldInitSpec(this, _retries, 0);\n    _classPrivateFieldInitSpec(this, _minDuration, -Infinity);\n    // of current measurement\n    _classPrivateFieldInitSpec(this, _throttleMs, 0);\n    _classPrivateFieldInitSpec(this, _estimatedServerTime, 0);\n    _classPrivateFieldInitSpec(this, _currentFetchPromise, undefined);\n    _classPrivateFieldInitSpec(this, _currentNextMsmTimeoutId, undefined);\n    if (!_measurements2) throw new Error('Missing measurements argument');\n    if (!downloadApiUrl) throw new Error('Missing downloadApiUrl argument');\n    if (!uploadApiUrl) throw new Error('Missing uploadApiUrl argument');\n    _classPrivateFieldSet2(_measurements, this, _measurements2);\n    _classPrivateFieldSet2(_downloadApi, this, downloadApiUrl);\n    _classPrivateFieldSet2(_uploadApi, this, uploadApiUrl);\n    _classPrivateFieldSet2(_throttleMs, this, throttleMs);\n    _classPrivateFieldSet2(_estimatedServerTime, this, Math.max(0, estimatedServerTime));\n  }\n\n  // Public attributes\n  return _createClass(BandwidthMeasurementEngine, [{\n    key: \"results\",\n    get: function get() {\n      // read access to results\n      return _classPrivateFieldGet2(_results$1, this);\n    }\n  }, {\n    key: \"qsParams\",\n    get:\n    // additional query string params to include in the requests\n    function get() {\n      return _classPrivateFieldGet2(_qsParams, this);\n    },\n    set: function set(v) {\n      _classPrivateFieldSet2(_qsParams, this, v);\n    }\n  }, {\n    key: \"fetchOptions\",\n    get:\n    // additional options included in the requests\n    function get() {\n      return _classPrivateFieldGet2(_fetchOptions, this);\n    },\n    set: function set(v) {\n      _classPrivateFieldSet2(_fetchOptions, this, v);\n    }\n  }, {\n    key: \"responseHook\",\n    set:\n    // pipe-through of response objects\n    function set(f) {\n      _classPrivateFieldSet2(_responseHook, this, f);\n    }\n  }, {\n    key: \"onRunningChange\",\n    set:\n    // callback invoked when engine starts/stops\n    function set(f) {\n      _classPrivateFieldSet2(_onRunningChange, this, f);\n    }\n  }, {\n    key: \"onNewMeasurementStarted\",\n    set:\n    // callback invoked when a new item in the measurement list is started\n    function set(f) {\n      _classPrivateFieldSet2(_onNewMeasurementStarted, this, f);\n    }\n  }, {\n    key: \"onMeasurementResult\",\n    set:\n    // callback invoked when a new measurement result arrives\n    function set(f) {\n      _classPrivateFieldSet2(_onMeasurementResult, this, f);\n    }\n  }, {\n    key: \"onFinished\",\n    set:\n    // callback invoked when all the measurements are finished\n    function set(f) {\n      _classPrivateFieldSet2(_onFinished$1, this, f);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set:\n    // Invoked when unable to get a response from the API\n    function set(f) {\n      _classPrivateFieldSet2(_onConnectionError$1, this, f);\n    }\n\n    // Public methods\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      clearTimeout(_classPrivateFieldGet2(_currentNextMsmTimeoutId, this));\n      _assertClassBrand(_BandwidthMeasurementEngine_brand, this, _cancelCurrentMeasurement).call(this);\n      _assertClassBrand(_BandwidthMeasurementEngine_brand, this, _setRunning$2).call(this, false);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!_classPrivateFieldGet2(_running$2, this)) {\n        _assertClassBrand(_BandwidthMeasurementEngine_brand, this, _setRunning$2).call(this, true);\n        _assertClassBrand(_BandwidthMeasurementEngine_brand, this, _nextMeasurement).call(this);\n      }\n    }\n  }]);\n}();\nfunction _setRunning$2(running) {\n  var _this = this;\n  if (running !== _classPrivateFieldGet2(_running$2, this)) {\n    _classPrivateFieldSet2(_running$2, this, running);\n    setTimeout(function () {\n      return _classPrivateFieldGet2(_onRunningChange, _this).call(_this, _classPrivateFieldGet2(_running$2, _this));\n    });\n  }\n}\nfunction _saveMeasurementResults(measIdx, measTiming) {\n  var _this2 = this;\n  var _classPrivateFieldGet2$1 = _classPrivateFieldGet2(_measurements, this)[measIdx],\n    bytes = _classPrivateFieldGet2$1.bytes,\n    dir = _classPrivateFieldGet2$1.dir;\n  var results = _classPrivateFieldGet2(_results$1, this);\n  var bytesResult = results[dir].hasOwnProperty(bytes) ? results[dir][bytes] : {\n    timings: [],\n    // count all measurements with same bytes and direction\n    numMeasurements: _classPrivateFieldGet2(_measurements, this).filter(function (_ref6) {\n      var b = _ref6.bytes,\n        d = _ref6.dir;\n      return bytes === b \u0026\u0026 dir === d;\n    }).map(function (m) {\n      return m.count;\n    }).reduce(function (agg, cnt) {\n      return agg + cnt;\n    }, 0)\n  };\n  !!measTiming \u0026\u0026 bytesResult.timings.push(measTiming);\n  bytesResult.timings = bytesResult.timings.slice(-bytesResult.numMeasurements);\n  results[dir][bytes] = bytesResult;\n  if (measTiming) {\n    setTimeout(function () {\n      _classPrivateFieldGet2(_onMeasurementResult, _this2).call(_this2, _objectSpread2({\n        type: dir,\n        bytes: bytes\n      }, measTiming), results);\n    });\n  } else {\n    _classPrivateFieldGet2(_onNewMeasurementStarted, this).call(this, _classPrivateFieldGet2(_measurements, this)[measIdx], results);\n  }\n}\nfunction _nextMeasurement() {\n  var _this3 = this;\n  var measurements = _classPrivateFieldGet2(_measurements, this);\n  var meas = measurements[_classPrivateFieldGet2(_measIdx, this)];\n  if (_classPrivateFieldGet2(_counter, this) \u003e= meas.count) {\n    // Finished current measurement\n    var finished = _classPrivateFieldGet2(_finished$1, this);\n    if (_classPrivateFieldGet2(_minDuration, this) \u003e this.finishRequestDuration \u0026\u0026 !meas.bypassMinDuration) {\n      // mark direction as finished\n      var _dir = meas.dir;\n      _classPrivateFieldGet2(_finished$1, this)[_dir] = true;\n      Object.values(_classPrivateFieldGet2(_finished$1, this)).every(function (finished) {\n        return finished;\n      }) \u0026\u0026 _classPrivateFieldGet2(_onFinished$1, this).call(this, _classPrivateFieldGet2(_results$1, this));\n    }\n\n    // clear settings\n    _classPrivateFieldSet2(_counter, this, 0);\n    _classPrivateFieldSet2(_minDuration, this, -Infinity);\n    performance.clearResourceTimings();\n    do {\n      _classPrivateFieldSet2(_measIdx, this, _classPrivateFieldGet2(_measIdx, this) + 1); // skip through finished measurements\n    } while (_classPrivateFieldGet2(_measIdx, this) \u003c measurements.length \u0026\u0026 finished[measurements[_classPrivateFieldGet2(_measIdx, this)].dir]);\n    if (_classPrivateFieldGet2(_measIdx, this) \u003e= measurements.length) {\n      // reached the end: halt further measurements\n      _classPrivateFieldSet2(_finished$1, this, {\n        down: true,\n        up: true\n      });\n      _assertClassBrand(_BandwidthMeasurementEngine_brand, this, _setRunning$2).call(this, false);\n      _classPrivateFieldGet2(_onFinished$1, this).call(this, _classPrivateFieldGet2(_results$1, this));\n      return;\n    }\n    meas = measurements[_classPrivateFieldGet2(_measIdx, this)];\n  }\n  var measIdx = _classPrivateFieldGet2(_measIdx, this);\n  if (_classPrivateFieldGet2(_counter, this) === 0) {\n    _assertClassBrand(_BandwidthMeasurementEngine_brand, this, _saveMeasurementResults).call(this, measIdx); // register measurement start\n  }\n  var _meas = meas,\n    numBytes = _meas.bytes,\n    dir = _meas.dir;\n  var isDown = dir === 'down';\n  var apiUrl = isDown ? _classPrivateFieldGet2(_downloadApi, this) : _classPrivateFieldGet2(_uploadApi, this);\n  var qsParams = Object.assign({}, _classPrivateFieldGet2(_qsParams, this));\n  isDown \u0026\u0026 (qsParams.bytes = \"\".concat(numBytes));\n  var url = \"\".concat(apiUrl.startsWith('http') || apiUrl.startsWith('//') ? '' : window.location.origin // use abs to match perf timing urls\n  ).concat(apiUrl, \"?\").concat(Object.entries(qsParams).map(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n      k = _ref8[0],\n      v = _ref8[1];\n    return \"\".concat(k, \"=\").concat(v);\n  }).join('\u0026'));\n  var fetchOpt = Object.assign({}, isDown ? {} : {\n    method: 'POST',\n    body: genContent(numBytes)\n  }, _classPrivateFieldGet2(_fetchOptions, this));\n  var serverTime;\n  var curPromise = _classPrivateFieldSet2(_currentFetchPromise, this, fetch(url, fetchOpt).then(function (r) {\n    if (r.ok) return r;\n    throw Error(r.statusText);\n  }).then(function (r) {\n    _this3.getServerTime \u0026\u0026 (serverTime = _this3.getServerTime(r));\n    return r;\n  }).then(function (r) {\n    return r.text().then(function (body) {\n      _classPrivateFieldGet2(_responseHook, _this3) \u0026\u0026 _classPrivateFieldGet2(_responseHook, _this3).call(_this3, {\n        url: url,\n        headers: r.headers,\n        body: body\n      });\n      return body;\n    });\n  }).then(function (_, reject) {\n    if (curPromise._cancel) {\n      reject('cancelled');\n      return;\n    }\n    var perf = performance.getEntriesByName(url).slice(-1)[0]; // get latest perf timing\n    var timing = {\n      transferSize: perf.transferSize,\n      ttfb: getTtfb(perf),\n      payloadDownloadTime: gePayloadDownload(perf),\n      serverTime: serverTime || -1,\n      measTime: new Date()\n    };\n    timing.ping = Math.max(1e-2, timing.ttfb - (serverTime || _classPrivateFieldGet2(_estimatedServerTime, _this3))); // ttfb = network latency + server time\n\n    timing.duration = (isDown ? calcDownloadDuration : calcUploadDuration)(timing);\n    timing.bps = (isDown ? calcDownloadSpeed : calcUploadSpeed)(timing, numBytes);\n    if (isDown \u0026\u0026 numBytes) {\n      var reqSize = +numBytes;\n      if (timing.transferSize \u0026\u0026 (timing.transferSize \u003c reqSize || timing.transferSize / reqSize \u003e 1.05)) {\n        // log if transferSize is too different from requested size\n        console.warn(\"Requested \".concat(reqSize, \"B but received \").concat(timing.transferSize, \"B (\").concat(Math.round(timing.transferSize / reqSize * 1e4) / 1e2, \"%).\"));\n      }\n    }\n    _assertClassBrand(_BandwidthMeasurementEngine_brand, _this3, _saveMeasurementResults).call(_this3, measIdx, timing);\n    var requestDuration = timing.duration;\n    _classPrivateFieldSet2(_minDuration, _this3, _classPrivateFieldGet2(_minDuration, _this3) \u003c 0 ? requestDuration : Math.min(_classPrivateFieldGet2(_minDuration, _this3), requestDuration)); // carry minimum request duration\n\n    _classPrivateFieldSet2(_counter, _this3, _classPrivateFieldGet2(_counter, _this3) + 1);\n    _classPrivateFieldSet2(_retries, _this3, 0);\n    if (_classPrivateFieldGet2(_throttleMs, _this3)) {\n      _classPrivateFieldSet2(_currentNextMsmTimeoutId, _this3, setTimeout(function () {\n        return _assertClassBrand(_BandwidthMeasurementEngine_brand, _this3, _nextMeasurement).call(_this3);\n      }, _classPrivateFieldGet2(_throttleMs, _this3)));\n    } else {\n      _assertClassBrand(_BandwidthMeasurementEngine_brand, _this3, _nextMeasurement).call(_this3);\n    }\n  })[\"catch\"](function (error) {\n    var _this$retries, _this$retries2;\n    if (curPromise._cancel) return;\n    console.warn(\"Error fetching \".concat(url, \": \").concat(error));\n    if ((_classPrivateFieldSet2(_retries, _this3, (_this$retries = _classPrivateFieldGet2(_retries, _this3), _this$retries2 = _this$retries++, _this$retries)), _this$retries2) \u003c MAX_RETRIES) {\n      _assertClassBrand(_BandwidthMeasurementEngine_brand, _this3, _nextMeasurement).call(_this3); // keep trying\n    } else {\n      _classPrivateFieldSet2(_retries, _this3, 0);\n      _assertClassBrand(_BandwidthMeasurementEngine_brand, _this3, _setRunning$2).call(_this3, false);\n      _classPrivateFieldGet2(_onConnectionError$1, _this3).call(_this3, \"Connection failed to \".concat(url, \". Gave up after \").concat(MAX_RETRIES, \" retries.\"));\n    }\n  }));\n}\nfunction _cancelCurrentMeasurement() {\n  var curPromise = _classPrivateFieldGet2(_currentFetchPromise, this);\n  curPromise \u0026\u0026 (curPromise._cancel = true);\n}\n\nvar _excluded$5 = [\"measureParallelLatency\", \"parallelLatencyThrottleMs\", \"downloadApiUrl\", \"uploadApiUrl\", \"estimatedServerTime\"];\nvar _latencyEngine = /*#__PURE__*/new WeakMap();\nvar _latencyTimeout = /*#__PURE__*/new WeakMap();\nvar _BandwidthWithParallelLatencyEngine_brand = /*#__PURE__*/new WeakSet();\nvar BandwidthWithParallelLatencyEngine = /*#__PURE__*/function (_BandwidthEngine) {\n  function BandwidthWithParallelLatencyEngine(measurements) {\n    var _this;\n    var _ref = arguments.length \u003e 1 \u0026\u0026 arguments[1] !== undefined ? arguments[1] : {},\n      _ref$measureParallelL = _ref.measureParallelLatency,\n      measureParallelLatency = _ref$measureParallelL === void 0 ? false : _ref$measureParallelL,\n      _ref$parallelLatencyT = _ref.parallelLatencyThrottleMs,\n      parallelLatencyThrottleMs = _ref$parallelLatencyT === void 0 ? 100 : _ref$parallelLatencyT,\n      downloadApiUrl = _ref.downloadApiUrl,\n      uploadApiUrl = _ref.uploadApiUrl,\n      _ref$estimatedServerT = _ref.estimatedServerTime,\n      estimatedServerTime = _ref$estimatedServerT === void 0 ? 0 : _ref$estimatedServerT,\n      ptProps = _objectWithoutProperties(_ref, _excluded$5);\n    _classCallCheck(this, BandwidthWithParallelLatencyEngine);\n    _this = _callSuper(this, BandwidthWithParallelLatencyEngine, [measurements, _objectSpread2({\n      downloadApiUrl: downloadApiUrl,\n      uploadApiUrl: uploadApiUrl,\n      estimatedServerTime: estimatedServerTime\n    }, ptProps)]);\n    // Internal methods\n    _classPrivateMethodInitSpec(_this, _BandwidthWithParallelLatencyEngine_brand);\n    // Internal state\n    _classPrivateFieldInitSpec(_this, _latencyEngine, void 0);\n    _classPrivateFieldInitSpec(_this, _latencyTimeout, void 0);\n    if (measureParallelLatency) {\n      _classPrivateFieldSet2(_latencyEngine, _this, new BandwidthMeasurementEngine([{\n        dir: 'down',\n        bytes: 0,\n        count: Infinity,\n        bypassMinDuration: true\n      }], {\n        downloadApiUrl: downloadApiUrl,\n        uploadApiUrl: uploadApiUrl,\n        estimatedServerTime: estimatedServerTime,\n        throttleMs: parallelLatencyThrottleMs\n      }));\n      _classPrivateFieldGet2(_latencyEngine, _this).qsParams = {\n        during: \"\".concat(measurements[0].dir, \"load\")\n      };\n      _superPropSet((BandwidthWithParallelLatencyEngine), \"onRunningChange\", _assertClassBrand(_BandwidthWithParallelLatencyEngine_brand, _this, _setLatencyRunning), _this, 1);\n      _superPropSet((BandwidthWithParallelLatencyEngine), \"onConnectionError\", function () {\n        return _classPrivateFieldGet2(_latencyEngine, _this).pause();\n      }, _this, 1);\n    }\n    return _this;\n  }\n\n  // Public attributes\n  _inherits(BandwidthWithParallelLatencyEngine, _BandwidthEngine);\n  return _createClass(BandwidthWithParallelLatencyEngine, [{\n    key: \"latencyResults\",\n    get: function get() {\n      // read access to latency results\n      return _classPrivateFieldGet2(_latencyEngine, this) \u0026\u0026 _classPrivateFieldGet2(_latencyEngine, this).results.down[0].timings;\n    }\n\n    // callback invoked when a new parallel latency result arrives\n  }, {\n    key: \"onParallelLatencyResult\",\n    set: function set(f) {\n      _classPrivateFieldGet2(_latencyEngine, this) \u0026\u0026 (_classPrivateFieldGet2(_latencyEngine, this).onMeasurementResult = function (res) {\n        return f(res);\n      });\n    }\n\n    // Overridden attributes\n  }, {\n    key: \"fetchOptions\",\n    get: function get() {\n      return _superPropGet(BandwidthWithParallelLatencyEngine, \"fetchOptions\", this, 1);\n    },\n    set: function set(fetchOptions) {\n      _superPropSet(BandwidthWithParallelLatencyEngine, \"fetchOptions\", fetchOptions, this, 1);\n      _classPrivateFieldGet2(_latencyEngine, this) \u0026\u0026 (_classPrivateFieldGet2(_latencyEngine, this).fetchOptions = fetchOptions);\n    }\n  }, {\n    key: \"onRunningChange\",\n    set: function set(onRunningChange) {\n      var _this2 = this;\n      _superPropSet(BandwidthWithParallelLatencyEngine, \"onRunningChange\", function (running) {\n        _assertClassBrand(_BandwidthWithParallelLatencyEngine_brand, _this2, _setLatencyRunning).call(_this2, running);\n        onRunningChange(running);\n      }, this, 1);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set: function set(onConnectionError) {\n      var _this3 = this;\n      _superPropSet(BandwidthWithParallelLatencyEngine, \"onConnectionError\", function () {\n        _classPrivateFieldGet2(_latencyEngine, _this3) \u0026\u0026 _classPrivateFieldGet2(_latencyEngine, _this3).pause();\n        onConnectionError.apply(void 0, arguments);\n      }, this, 1);\n    }\n  }]);\n}(BandwidthMeasurementEngine);\nfunction _setLatencyRunning(running) {\n  var _this4 = this;\n  if (_classPrivateFieldGet2(_latencyEngine, this)) {\n    if (!running) {\n      clearTimeout(_classPrivateFieldGet2(_latencyTimeout, this));\n      _classPrivateFieldGet2(_latencyEngine, this).pause();\n    } else {\n      // slight delay in starting latency measurements\n      _classPrivateFieldSet2(_latencyTimeout, this, setTimeout(function () {\n        return _classPrivateFieldGet2(_latencyEngine, _this4).play();\n      }, 20));\n    }\n  }\n}\n\nvar _excluded$4 = [\"measurementId\", \"logApiUrl\"];\nvar _measurementId$1 = /*#__PURE__*/new WeakMap();\nvar _token = /*#__PURE__*/new WeakMap();\nvar _requestTime = /*#__PURE__*/new WeakMap();\nvar _logApiUrl = /*#__PURE__*/new WeakMap();\nvar _LoggingBandwidthEngine_brand = /*#__PURE__*/new WeakSet();\nvar LoggingBandwidthEngine = /*#__PURE__*/function (_BandwidthEngine) {\n  function LoggingBandwidthEngine(measurements) {\n    var _this;\n    var _ref = arguments.length \u003e 1 \u0026\u0026 arguments[1] !== undefined ? arguments[1] : {},\n      measurementId = _ref.measurementId,\n      logApiUrl = _ref.logApiUrl,\n      ptProps = _objectWithoutProperties(_ref, _excluded$4);\n    _classCallCheck(this, LoggingBandwidthEngine);\n    _this = _callSuper(this, LoggingBandwidthEngine, [measurements, ptProps]);\n    // Internal methods\n    _classPrivateMethodInitSpec(_this, _LoggingBandwidthEngine_brand);\n    // Internal state\n    _classPrivateFieldInitSpec(_this, _measurementId$1, void 0);\n    _classPrivateFieldInitSpec(_this, _token, void 0);\n    _classPrivateFieldInitSpec(_this, _requestTime, void 0);\n    _classPrivateFieldInitSpec(_this, _logApiUrl, void 0);\n    _classPrivateFieldSet2(_measurementId$1, _this, measurementId);\n    _classPrivateFieldSet2(_logApiUrl, _this, logApiUrl);\n    _superPropSet((LoggingBandwidthEngine), \"qsParams\", logApiUrl ? {\n      measId: _classPrivateFieldGet2(_measurementId$1, _this)\n    } : {}, _this, 1);\n    _superPropSet((LoggingBandwidthEngine), \"responseHook\", function (r) {\n      return _assertClassBrand(_LoggingBandwidthEngine_brand, _this, _loggingResponseHook).call(_this, r);\n    }, _this, 1);\n    _superPropSet((LoggingBandwidthEngine), \"onMeasurementResult\", function (meas) {\n      return _assertClassBrand(_LoggingBandwidthEngine_brand, _this, _logMeasurement).call(_this, meas);\n    }, _this, 1);\n    return _this;\n  }\n\n  // Overridden attributes\n  _inherits(LoggingBandwidthEngine, _BandwidthEngine);\n  return _createClass(LoggingBandwidthEngine, [{\n    key: \"qsParams\",\n    set: function set(qsParams) {\n      _superPropSet(LoggingBandwidthEngine, \"qsParams\", _classPrivateFieldGet2(_logApiUrl, this) ? _objectSpread2({\n        measId: _classPrivateFieldGet2(_measurementId$1, this)\n      }, qsParams) : qsParams, this, 1);\n    }\n  }, {\n    key: \"responseHook\",\n    set: function set(responseHook) {\n      var _this2 = this;\n      _superPropSet(LoggingBandwidthEngine, \"responseHook\", function (r) {\n        responseHook(r);\n        _assertClassBrand(_LoggingBandwidthEngine_brand, _this2, _loggingResponseHook).call(_this2, r);\n      }, this, 1);\n    }\n  }, {\n    key: \"onMeasurementResult\",\n    set: function set(onMeasurementResult) {\n      var _this3 = this;\n      _superPropSet(LoggingBandwidthEngine, \"onMeasurementResult\", function (meas) {\n        for (var _len = arguments.length, restArgs = new Array(_len \u003e 1 ? _len - 1 : 0), _key = 1; _key \u003c _len; _key++) {\n          restArgs[_key - 1] = arguments[_key];\n        }\n        onMeasurementResult.apply(void 0, [meas].concat(restArgs));\n        _assertClassBrand(_LoggingBandwidthEngine_brand, _this3, _logMeasurement).call(_this3, meas);\n      }, this, 1);\n    }\n  }]);\n}(BandwidthWithParallelLatencyEngine);\nfunction _loggingResponseHook(r) {\n  if (!_classPrivateFieldGet2(_logApiUrl, this)) return;\n\n  // get request time\n  _classPrivateFieldSet2(_requestTime, this, +r.headers.get(\"cf-meta-request-time\"));\n\n  // get token in payload\n  _classPrivateFieldSet2(_token, this, r.body.slice(-300).split('___').pop());\n}\nfunction _logMeasurement(measData) {\n  if (!_classPrivateFieldGet2(_logApiUrl, this)) return;\n  var logData = {\n    type: measData.type,\n    bytes: measData.bytes,\n    ping: Math.round(measData.ping),\n    // round to ms\n    ttfb: Math.round(measData.ttfb),\n    // round to ms\n    payloadDownloadTime: Math.round(measData.payloadDownloadTime),\n    duration: Math.round(measData.duration),\n    transferSize: Math.round(measData.transferSize),\n    serverTime: Math.round(measData.serverTime),\n    token: _classPrivateFieldGet2(_token, this),\n    requestTime: _classPrivateFieldGet2(_requestTime, this),\n    measId: _classPrivateFieldGet2(_measurementId$1, this)\n  };\n  _classPrivateFieldSet2(_token, this, null);\n  _classPrivateFieldSet2(_requestTime, this, null);\n  fetch(_classPrivateFieldGet2(_logApiUrl, this), _objectSpread2({\n    method: 'POST',\n    body: JSON.stringify(logData)\n  }, this.fetchOptions));\n}\n\nvar _running$1 = /*#__PURE__*/new WeakMap();\nvar _currentPromise = /*#__PURE__*/new WeakMap();\nvar _promiseFn = /*#__PURE__*/new WeakMap();\nvar _PromiseEngine_brand = /*#__PURE__*/new WeakSet();\nvar PromiseEngine = /*#__PURE__*/function () {\n  function PromiseEngine(promiseFn) {\n    _classCallCheck(this, PromiseEngine);\n    // Internal methods\n    _classPrivateMethodInitSpec(this, _PromiseEngine_brand);\n    // Internal state\n    _classPrivateFieldInitSpec(this, _running$1, false);\n    _classPrivateFieldInitSpec(this, _currentPromise, undefined);\n    _classPrivateFieldInitSpec(this, _promiseFn, void 0);\n    if (!promiseFn) throw new Error(\"Missing operation to perform\");\n    _classPrivateFieldSet2(_promiseFn, this, promiseFn);\n    this.play();\n  }\n\n  // Public methods\n  return _createClass(PromiseEngine, [{\n    key: \"pause\",\n    value: function pause() {\n      _assertClassBrand(_PromiseEngine_brand, this, _cancelCurrent).call(this);\n      _assertClassBrand(_PromiseEngine_brand, this, _setRunning$1).call(this, false);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.pause();\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!_classPrivateFieldGet2(_running$1, this)) {\n        _assertClassBrand(_PromiseEngine_brand, this, _setRunning$1).call(this, true);\n        _assertClassBrand(_PromiseEngine_brand, this, _next$1).call(this);\n      }\n    }\n  }]);\n}();\nfunction _setRunning$1(running) {\n  if (running !== _classPrivateFieldGet2(_running$1, this)) {\n    _classPrivateFieldSet2(_running$1, this, running);\n  }\n}\nfunction _next$1() {\n  var _this2 = this;\n  var curPromise = _classPrivateFieldSet2(_currentPromise, this, _classPrivateFieldGet2(_promiseFn, this).call(this).then(function () {\n    !curPromise._cancel \u0026\u0026 _assertClassBrand(_PromiseEngine_brand, _this2, _next$1).call(_this2);\n  }));\n}\nfunction _cancelCurrent() {\n  var curPromise = _classPrivateFieldGet2(_currentPromise, this);\n  curPromise \u0026\u0026 (curPromise._cancel = true);\n}\nvar _engines = /*#__PURE__*/new WeakMap();\nvar LoadNetworkEngine = /*#__PURE__*/function () {\n  function LoadNetworkEngine() {\n    var _this = this;\n    var _ref = arguments.length \u003e 0 \u0026\u0026 arguments[0] !== undefined ? arguments[0] : {},\n      download = _ref.download,\n      upload = _ref.upload;\n    _classCallCheck(this, LoadNetworkEngine);\n    // Public attributes\n    _defineProperty(this, \"qsParams\", {});\n    // additional query string params to include in the requests\n    _defineProperty(this, \"fetchOptions\", {});\n    // Internal state\n    _classPrivateFieldInitSpec(this, _engines, []);\n    // Expected attrs for each: { apiUrl, chunkSize }\n    if (!download \u0026\u0026 !upload) throw new Error('Missing at least one of download/upload config');\n    [[download, 'download'], [upload, 'upload']].filter(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 1),\n        cfg = _ref3[0];\n      return cfg;\n    }).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n        cfg = _ref5[0],\n        type = _ref5[1];\n      var apiUrl = cfg.apiUrl,\n        chunkSize = cfg.chunkSize;\n      if (!apiUrl) throw new Error(\"Missing \".concat(type, \" apiUrl argument\"));\n      if (!chunkSize) throw new Error(\"Missing \".concat(type, \" chunkSize argument\"));\n    });\n    var getLoadEngine = function getLoadEngine(_ref6) {\n      var apiUrl = _ref6.apiUrl,\n        _ref6$qsParams = _ref6.qsParams,\n        qsParams = _ref6$qsParams === void 0 ? {} : _ref6$qsParams,\n        _ref6$fetchOptions = _ref6.fetchOptions,\n        fetchOptions = _ref6$fetchOptions === void 0 ? {} : _ref6$fetchOptions;\n      return new PromiseEngine(function () {\n        var fetchQsParams = Object.assign({}, qsParams, _this.qsParams);\n        var url = \"\".concat(apiUrl.startsWith('http') || apiUrl.startsWith('//') ? '' : window.location.origin // use abs to match perf timing urls\n        ).concat(apiUrl, \"?\").concat(Object.entries(fetchQsParams).map(function (_ref7) {\n          var _ref8 = _slicedToArray(_ref7, 2),\n            k = _ref8[0],\n            v = _ref8[1];\n          return \"\".concat(k, \"=\").concat(v);\n        }).join('\u0026'));\n        var fetchOpt = Object.assign({}, fetchOptions, _this.fetchOptions);\n        return fetch(url, fetchOpt).then(function (r) {\n          if (r.ok) return r;\n          throw Error(r.statusText);\n        }).then(function (r) {\n          return r.text();\n        });\n      });\n    };\n    download \u0026\u0026 _classPrivateFieldGet2(_engines, this).push(getLoadEngine({\n      apiUrl: download.apiUrl,\n      qsParams: {\n        bytes: \"\".concat(download.chunkSize)\n      }\n    }));\n    upload \u0026\u0026 _classPrivateFieldGet2(_engines, this).push(getLoadEngine({\n      apiUrl: upload.apiUrl,\n      fetchOptions: {\n        method: 'POST',\n        body: '0'.repeat(upload.chunkSize)\n      }\n    }));\n  }\n  return _createClass(LoadNetworkEngine, [{\n    key: \"pause\",\n    value:\n    // additional options included in the requests\n\n    // Public methods\n    function pause() {\n      _classPrivateFieldGet2(_engines, this).forEach(function (engine) {\n        return engine.pause();\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.pause();\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      _classPrivateFieldGet2(_engines, this).forEach(function (engine) {\n        return engine.play();\n      });\n    }\n  }]);\n}();\n\nvar _excluded$3 = [\"iceServers\", \"acceptIceCandidate\", \"dataChannelCfg\"];\nvar _established = /*#__PURE__*/new WeakMap();\nvar _sender = /*#__PURE__*/new WeakMap();\nvar _receiver = /*#__PURE__*/new WeakMap();\nvar _senderDc = /*#__PURE__*/new WeakMap();\nvar _receiverDc = /*#__PURE__*/new WeakMap();\nvar SelfWebRtcDataConnection = /*#__PURE__*/function () {\n  function SelfWebRtcDataConnection() {\n    var _this = this;\n    var _ref = arguments.length \u003e 0 \u0026\u0026 arguments[0] !== undefined ? arguments[0] : {},\n      _ref$iceServers = _ref.iceServers,\n      iceServers = _ref$iceServers === void 0 ? [] : _ref$iceServers,\n      _ref$acceptIceCandida = _ref.acceptIceCandidate,\n      acceptIceCandidate = _ref$acceptIceCandida === void 0 ? function (candidate) {\n        var protocol = candidate.protocol || '';\n        // parsed webRTC candidate properties not extracted in Firefox: https://developer.mozilla.org/en-US/docs/Web/API/RTCIceCandidate\n        if (!protocol \u0026\u0026 candidate.candidate) {\n          var sdpAttrs = candidate.candidate.split(' ');\n          sdpAttrs.length \u003e= 3 \u0026\u0026 (protocol = sdpAttrs[2]);\n        }\n        return protocol.toLowerCase() === 'udp';\n      } : _ref$acceptIceCandida,\n      _ref$dataChannelCfg = _ref.dataChannelCfg,\n      dataChannelCfg = _ref$dataChannelCfg === void 0 ? {\n        ordered: false,\n        maxRetransmits: 0\n      } : _ref$dataChannelCfg,\n      rtcPeerConnectionCfg = _objectWithoutProperties(_ref, _excluded$3);\n    _classCallCheck(this, SelfWebRtcDataConnection);\n    // Public attributes\n    _defineProperty(this, \"onOpen\", function () {});\n    // callback invoked when WebRTC TURN connection is established\n    _defineProperty(this, \"onClose\", function () {});\n    // callback invoked when WebRTC TURN connection is closed\n    _defineProperty(this, \"onMessageReceived\", function () {});\n    // Internal state\n    _classPrivateFieldInitSpec(this, _established, false);\n    _classPrivateFieldInitSpec(this, _sender, void 0);\n    _classPrivateFieldInitSpec(this, _receiver, void 0);\n    _classPrivateFieldInitSpec(this, _senderDc, void 0);\n    _classPrivateFieldInitSpec(this, _receiverDc, void 0);\n    var sender = new RTCPeerConnection(_objectSpread2({\n      iceServers: iceServers\n    }, rtcPeerConnectionCfg));\n    var receiver = new RTCPeerConnection(_objectSpread2({\n      iceServers: iceServers\n    }, rtcPeerConnectionCfg));\n    var senderDc = sender.createDataChannel('channel', dataChannelCfg);\n    senderDc.onopen = function () {\n      _classPrivateFieldSet2(_established, _this, true);\n      _this.onOpen();\n    };\n    senderDc.onclose = function () {\n      return _this.close();\n    };\n    // senderDc.onmessage = msg =\u003e this.#onMessage(msg.data);\n\n    receiver.ondatachannel = function (e) {\n      var dc = e.channel;\n      dc.onclose = function () {\n        return _this.close();\n      };\n      dc.onmessage = function (msg) {\n        return _this.onMessageReceived(msg.data);\n      };\n      _classPrivateFieldSet2(_receiverDc, _this, dc);\n    };\n\n    // sender.onconnectionstatechange = e =\u003e console.log('connection state change', e);\n    // sender.oniceconnectionstatechange = e =\u003e console.log('ice connection state change', e);\n    // sender.onicecandidateerror = e =\u003e console.log('ice error', e);\n    sender.onicecandidate = function (e) {\n      // console.log('sender', e.candidate);\n      e.candidate \u0026\u0026 acceptIceCandidate(e.candidate) \u0026\u0026 receiver.addIceCandidate(e.candidate);\n    };\n    receiver.onicecandidate = function (e) {\n      // console.log('receiver', e.candidate);\n      e.candidate \u0026\u0026 acceptIceCandidate(e.candidate) \u0026\u0026 sender.addIceCandidate(e.candidate);\n    };\n    sender.createOffer().then(function (offer) {\n      return sender.setLocalDescription(offer);\n    }).then(function () {\n      return receiver.setRemoteDescription(sender.localDescription);\n    }).then(function () {\n      return receiver.createAnswer();\n    }).then(function (answer) {\n      return receiver.setLocalDescription(answer);\n    }).then(function () {\n      return sender.setRemoteDescription(receiver.localDescription);\n    });\n    _classPrivateFieldSet2(_sender, this, sender);\n    _classPrivateFieldSet2(_receiver, this, receiver);\n    _classPrivateFieldSet2(_senderDc, this, senderDc);\n    _classPrivateFieldSet2(_established, this, false);\n  }\n  return _createClass(SelfWebRtcDataConnection, [{\n    key: \"send\",\n    value:\n    // callback invoked when a new message is received from the TURN server\n\n    // Public methods\n    function send(msg) {\n      return _classPrivateFieldGet2(_senderDc, this).send(msg);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      _classPrivateFieldGet2(_sender, this) \u0026\u0026 _classPrivateFieldGet2(_sender, this).close();\n      _classPrivateFieldGet2(_receiver, this) \u0026\u0026 _classPrivateFieldGet2(_receiver, this).close();\n      _classPrivateFieldGet2(_senderDc, this) \u0026\u0026 _classPrivateFieldGet2(_senderDc, this).close();\n      _classPrivateFieldGet2(_receiverDc, this) \u0026\u0026 _classPrivateFieldGet2(_receiverDc, this).close();\n      _classPrivateFieldGet2(_established, this) \u0026\u0026 this.onClose();\n      _classPrivateFieldSet2(_established, this, false);\n      return this;\n    }\n  }]);\n}();\n\nvar _onCredentialsFailure = /*#__PURE__*/new WeakMap();\nvar _onConnectionError = /*#__PURE__*/new WeakMap();\nvar _onFinished = /*#__PURE__*/new WeakMap();\nvar _msgTracker = /*#__PURE__*/new WeakMap();\nvar _webRtcConnection = /*#__PURE__*/new WeakMap();\nvar _numMsgs = /*#__PURE__*/new WeakMap();\nvar PacketLossEngine = /*#__PURE__*/function () {\n  function PacketLossEngine() {\n    var _this = this;\n    var _ref = arguments.length \u003e 0 \u0026\u0026 arguments[0] !== undefined ? arguments[0] : {},\n      turnServerUri = _ref.turnServerUri,\n      turnServerCredsApi = _ref.turnServerCredsApi,\n      _ref$turnServerCredsA = _ref.turnServerCredsApiParser,\n      turnServerCredsApiParser = _ref$turnServerCredsA === void 0 ? function (_ref2) {\n        var username = _ref2.username,\n          credential = _ref2.credential,\n          server = _ref2.server;\n        return {\n          turnServerUser: username,\n          turnServerPass: credential,\n          turnServerUri: server\n        };\n      } : _ref$turnServerCredsA,\n      _ref$turnServerCredsA2 = _ref.turnServerCredsApiIncludeCredentials,\n      turnServerCredsApiIncludeCredentials = _ref$turnServerCredsA2 === void 0 ? false : _ref$turnServerCredsA2,\n      turnServerUser = _ref.turnServerUser,\n      turnServerPass = _ref.turnServerPass,\n      _ref$numMsgs = _ref.numMsgs,\n      numMsgs = _ref$numMsgs === void 0 ? 100 : _ref$numMsgs,\n      _ref$batchSize = _ref.batchSize,\n      batchSize = _ref$batchSize === void 0 ? 10 : _ref$batchSize,\n      _ref$batchWaitTime = _ref.batchWaitTime,\n      batchWaitTime = _ref$batchWaitTime === void 0 ? 10 : _ref$batchWaitTime,\n      _ref$responsesWaitTim = _ref.responsesWaitTime,\n      responsesWaitTime = _ref$responsesWaitTim === void 0 ? 5000 : _ref$responsesWaitTim,\n      _ref$connectionTimeou = _ref.connectionTimeout,\n      connectionTimeout = _ref$connectionTimeou === void 0 ? 5000 : _ref$connectionTimeou;\n    _classCallCheck(this, PacketLossEngine);\n    // Public attributes\n    _classPrivateFieldInitSpec(this, _onCredentialsFailure, function () {});\n    _classPrivateFieldInitSpec(this, _onConnectionError, function () {});\n    _classPrivateFieldInitSpec(this, _onFinished, function () {});\n    _defineProperty(this, \"onMsgSent\", function () {});\n    // Invoked when sending a new message to the TURN server\n    _defineProperty(this, \"onAllMsgsSent\", function () {});\n    // Invoked when all messages have been sent\n    _defineProperty(this, \"onMsgReceived\", function () {});\n    // Public methods\n\n    // Internal state\n    _classPrivateFieldInitSpec(this, _msgTracker, {});\n    _classPrivateFieldInitSpec(this, _webRtcConnection, void 0);\n    _classPrivateFieldInitSpec(this, _numMsgs, void 0);\n    if (!turnServerUri \u0026\u0026 !turnServerCredsApi) throw new Error('Missing turnServerCredsApi or turnServerUri argument');\n    if ((!turnServerUser || !turnServerPass) \u0026\u0026 !turnServerCredsApi) throw new Error('Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments');\n    _classPrivateFieldSet2(_numMsgs, this, numMsgs);\n    (!turnServerUser || !turnServerPass ?\n    // Get TURN credentials from API endpoint if not statically supplied\n    fetch(turnServerCredsApi, {\n      credentials: turnServerCredsApiIncludeCredentials ? 'include' : undefined\n    }).then(function (r) {\n      return r.json();\n    }).then(function (d) {\n      if (d.error) throw d.error;\n      return d;\n    }).then(turnServerCredsApiParser) : Promise.resolve({\n      turnServerUser: turnServerUser,\n      turnServerPass: turnServerPass\n    }))[\"catch\"](function (e) {\n      return _classPrivateFieldGet2(_onCredentialsFailure, _this).call(_this, e);\n    }).then(function (_ref3) {\n      var turnServerUser = _ref3.turnServerUser,\n        turnServerPass = _ref3.turnServerPass,\n        credsApiTurnServerUri = _ref3.turnServerUri;\n      var c = _classPrivateFieldSet2(_webRtcConnection, _this, new SelfWebRtcDataConnection({\n        iceServers: [{\n          urls: \"turn:\".concat(credsApiTurnServerUri || turnServerUri, \"?transport=udp\"),\n          username: turnServerUser,\n          credential: turnServerPass\n        }],\n        iceTransportPolicy: 'relay'\n      }));\n      var connectionSuccess = false;\n      setTimeout(function () {\n        if (!connectionSuccess) {\n          c.close();\n          _classPrivateFieldGet2(_onConnectionError, _this).call(_this, 'ICE connection timeout!');\n        }\n      }, connectionTimeout);\n      var msgTracker = _classPrivateFieldGet2(_msgTracker, _this);\n      c.onOpen = function () {\n        connectionSuccess = true;\n        var self = _this;\n        (function sendNum(n) {\n          if (n \u003c= numMsgs) {\n            var i = n;\n            while (i \u003c= Math.min(numMsgs, n + batchSize - 1)) {\n              msgTracker[i] = false;\n              c.send(i);\n              self.onMsgSent(i);\n              i++;\n            }\n            setTimeout(function () {\n              return sendNum(i);\n            }, batchWaitTime);\n          } else {\n            self.onAllMsgsSent(Object.keys(msgTracker).length);\n            var finishFn = function finishFn() {\n              c.close();\n              _classPrivateFieldGet2(_onFinished, self).call(self, self.results);\n            };\n            var finishTimeout = setTimeout(finishFn, responsesWaitTime);\n            var missingMsgs = Object.values(_classPrivateFieldGet2(_msgTracker, self)).filter(function (recv) {\n              return !recv;\n            }).length;\n            c.onMessageReceived = function (msg) {\n              clearTimeout(finishTimeout);\n              msgTracker[msg] = true;\n              self.onMsgReceived(msg);\n              missingMsgs--;\n              if (missingMsgs \u003c= 0 \u0026\u0026 Object.values(_classPrivateFieldGet2(_msgTracker, self)).every(function (recv) {\n                return recv;\n              })) {\n                // Last msg received, shortcut out\n                finishFn();\n              } else {\n                // restart timeout\n                finishTimeout = setTimeout(finishFn, responsesWaitTime);\n              }\n            };\n          }\n        })(1);\n      };\n      c.onMessageReceived = function (msg) {\n        msgTracker[msg] = true;\n        _this.onMsgReceived(msg);\n      };\n    })[\"catch\"](function (e) {\n      return _classPrivateFieldGet2(_onConnectionError, _this).call(_this, e.toString());\n    });\n  }\n  return _createClass(PacketLossEngine, [{\n    key: \"onCredentialsFailure\",\n    set:\n    // Invoked when unable to fetch TURN server credentials\n    function set(f) {\n      _classPrivateFieldSet2(_onCredentialsFailure, this, f);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set:\n    // Invoked when unable to establish a connection with TURN server\n    function set(f) {\n      _classPrivateFieldSet2(_onConnectionError, this, f);\n    }\n  }, {\n    key: \"onFinished\",\n    set:\n    // Invoked when the packet loss measurement is complete\n    function set(f) {\n      _classPrivateFieldSet2(_onFinished, this, f);\n    }\n  }, {\n    key: \"results\",\n    get:\n    // Invoked when receiving a new message from the TURN server\n\n    function get() {\n      var totalMessages = _classPrivateFieldGet2(_numMsgs, this);\n      var numMessagesSent = Object.keys(_classPrivateFieldGet2(_msgTracker, this)).length;\n      var lostMessages = Object.entries(_classPrivateFieldGet2(_msgTracker, this)).filter(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n          recv = _ref5[1];\n        return !recv;\n      }).map(function (_ref6) {\n        var _ref7 = _slicedToArray(_ref6, 1),\n          n = _ref7[0];\n        return +n;\n      });\n      var packetLoss = lostMessages.length / numMessagesSent;\n      return {\n        totalMessages: totalMessages,\n        numMessagesSent: numMessagesSent,\n        packetLoss: packetLoss,\n        lostMessages: lostMessages\n      };\n    }\n  }]);\n}();\n\nvar _excluded$2 = [\"downloadChunkSize\", \"uploadChunkSize\", \"downloadApiUrl\", \"uploadApiUrl\"];\nvar _loadEngine = /*#__PURE__*/new WeakMap();\nvar PacketLossUnderLoadEngine = /*#__PURE__*/function (_PacketLossEngine) {\n  function PacketLossUnderLoadEngine() {\n    var _this;\n    var _ref = arguments.length \u003e 0 \u0026\u0026 arguments[0] !== undefined ? arguments[0] : {},\n      downloadChunkSize = _ref.downloadChunkSize,\n      uploadChunkSize = _ref.uploadChunkSize,\n      downloadApiUrl = _ref.downloadApiUrl,\n      uploadApiUrl = _ref.uploadApiUrl,\n      ptProps = _objectWithoutProperties(_ref, _excluded$2);\n    _classCallCheck(this, PacketLossUnderLoadEngine);\n    _this = _callSuper(this, PacketLossUnderLoadEngine, [ptProps]);\n    // Internal state\n    _classPrivateFieldInitSpec(_this, _loadEngine, void 0);\n    if (downloadChunkSize || uploadChunkSize) {\n      _classPrivateFieldSet2(_loadEngine, _this, new LoadNetworkEngine({\n        download: downloadChunkSize ? {\n          apiUrl: downloadApiUrl,\n          chunkSize: downloadChunkSize\n        } : null,\n        upload: uploadChunkSize ? {\n          apiUrl: uploadApiUrl,\n          chunkSize: uploadChunkSize\n        } : null\n      }));\n      _superPropSet((PacketLossUnderLoadEngine), \"onCredentialsFailure\", _superPropSet((PacketLossUnderLoadEngine), \"onConnectionError\", _superPropSet((PacketLossUnderLoadEngine), \"onFinished\", function () {\n        return _classPrivateFieldGet2(_loadEngine, _this).stop();\n      }, _this, 1, 1), _this, 1, 1), _this, 1);\n    }\n    return _this;\n  }\n\n  // Overridden attributes\n  _inherits(PacketLossUnderLoadEngine, _PacketLossEngine);\n  return _createClass(PacketLossUnderLoadEngine, [{\n    key: \"qsParams\",\n    set: function set(qsParams) {\n      _classPrivateFieldGet2(_loadEngine, this) \u0026\u0026 (_classPrivateFieldGet2(_loadEngine, this).qsParams = qsParams);\n    }\n  }, {\n    key: \"fetchOptions\",\n    set: function set(fetchOptions) {\n      _classPrivateFieldGet2(_loadEngine, this) \u0026\u0026 (_classPrivateFieldGet2(_loadEngine, this).fetchOptions = fetchOptions);\n    }\n  }, {\n    key: \"onCredentialsFailure\",\n    set: function set(onCredentialsFailure) {\n      var _this2 = this;\n      _superPropSet(PacketLossUnderLoadEngine, \"onCredentialsFailure\", function () {\n        onCredentialsFailure.apply(void 0, arguments);\n        _classPrivateFieldGet2(_loadEngine, _this2) \u0026\u0026 _classPrivateFieldGet2(_loadEngine, _this2).stop();\n      }, this, 1);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set: function set(onConnectionError) {\n      var _this3 = this;\n      _superPropSet(PacketLossUnderLoadEngine, \"onConnectionError\", function () {\n        onConnectionError.apply(void 0, arguments);\n        _classPrivateFieldGet2(_loadEngine, _this3) \u0026\u0026 _classPrivateFieldGet2(_loadEngine, _this3).stop();\n      }, this, 1);\n    }\n  }, {\n    key: \"onFinished\",\n    set: function set(onFinished) {\n      var _this4 = this;\n      _superPropSet(PacketLossUnderLoadEngine, \"onFinished\", function () {\n        onFinished.apply(void 0, arguments);\n        _classPrivateFieldGet2(_loadEngine, _this4) \u0026\u0026 _classPrivateFieldGet2(_loadEngine, _this4).stop();\n      }, this, 1);\n    }\n  }]);\n}(PacketLossEngine);\n\nvar _excluded$1 = [\"reachable\"];\nvar ReachabilityEngine = /*#__PURE__*/_createClass(function ReachabilityEngine(targetUrl) {\n  var _this = this;\n  var _ref = arguments.length \u003e 1 \u0026\u0026 arguments[1] !== undefined ? arguments[1] : {},\n    _ref$timeout = _ref.timeout,\n    timeout = _ref$timeout === void 0 ? -1 : _ref$timeout,\n    _ref$fetchOptions = _ref.fetchOptions,\n    fetchOptions = _ref$fetchOptions === void 0 ? {} : _ref$fetchOptions;\n  _classCallCheck(this, ReachabilityEngine);\n  // Public attributes\n  _defineProperty(this, \"onFinished\", function () {});\n  var finished = false;\n  var finish = function finish(_ref2) {\n    var reachable = _ref2.reachable,\n      rest = _objectWithoutProperties(_ref2, _excluded$1);\n    if (finished) return;\n    finished = true;\n    _this.onFinished(_objectSpread2({\n      targetUrl: targetUrl,\n      reachable: reachable\n    }, rest));\n  };\n  fetch(targetUrl, fetchOptions).then(function (response) {\n    finish({\n      reachable: true,\n      response: response\n    });\n  })[\"catch\"](function (error) {\n    finish({\n      reachable: false,\n      error: error\n    });\n  });\n  timeout \u003e 0 \u0026\u0026 setTimeout(function () {\n    return finish({\n      reachable: false,\n      error: 'Request timeout'\n    });\n  }, timeout);\n});\n\nvar sum = function sum(vals) {\n  return vals.reduce(function (agg, val) {\n    return agg + val;\n  }, 0);\n};\nvar percentile = function percentile(vals) {\n  var perc = arguments.length \u003e 1 \u0026\u0026 arguments[1] !== undefined ? arguments[1] : 0.5;\n  if (!vals.length) return 0;\n  var sortedVals = vals.slice().sort(function (a, b) {\n    return a - b;\n  });\n  var idx = (vals.length - 1) * perc;\n  var rem = idx % 1;\n  if (rem === 0) return sortedVals[Math.round(idx)];\n\n  // calculate weighted average\n  var edges = [Math.floor, Math.ceil].map(function (rndFn) {\n    return sortedVals[rndFn(idx)];\n  });\n  return edges[0] + (edges[1] - edges[0]) * rem;\n};\n\nvar _config$3 = /*#__PURE__*/new WeakMap();\nvar _extractLoadedLatencies = /*#__PURE__*/new WeakMap();\nvar MeasurementCalculations = /*#__PURE__*/function () {\n  function MeasurementCalculations(config) {\n    var _this = this;\n    _classCallCheck(this, MeasurementCalculations);\n    // Public methods\n    _defineProperty(this, \"getLatencyPoints\", function (latencyResults) {\n      return latencyResults.timings.map(function (d) {\n        return d.ping;\n      });\n    });\n    _defineProperty(this, \"getLatency\", function (latencyResults) {\n      return percentile(_this.getLatencyPoints(latencyResults), _classPrivateFieldGet2(_config$3, _this).latencyPercentile);\n    });\n    _defineProperty(this, \"getBandwidthPoints\", function (bandwidthResults) {\n      return Object.entries(bandwidthResults).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          bytes = _ref2[0],\n          timings = _ref2[1].timings;\n        return timings.map(function (_ref3) {\n          var bps = _ref3.bps,\n            duration = _ref3.duration,\n            ping = _ref3.ping,\n            measTime = _ref3.measTime,\n            serverTime = _ref3.serverTime,\n            transferSize = _ref3.transferSize;\n          return {\n            bytes: +bytes,\n            bps: bps,\n            duration: duration,\n            ping: ping,\n            measTime: measTime,\n            serverTime: serverTime,\n            transferSize: transferSize\n          };\n        });\n      }).flat();\n    });\n    _defineProperty(this, \"getBandwidth\", function (bandwidthResults) {\n      return percentile(_this.getBandwidthPoints(bandwidthResults).filter(function (d) {\n        return d.duration \u003e= _classPrivateFieldGet2(_config$3, _this).bandwidthMinRequestDuration;\n      }).map(function (d) {\n        return d.bps;\n      }).filter(function (bps) {\n        return bps;\n      }), _classPrivateFieldGet2(_config$3, _this).bandwidthPercentile);\n    });\n    _defineProperty(this, \"getLoadedLatency\", function (loadedResults) {\n      return _this.getLatency({\n        timings: _classPrivateFieldGet2(_extractLoadedLatencies, _this).call(_this, loadedResults)\n      });\n    });\n    _defineProperty(this, \"getLoadedJitter\", function (loadedResults) {\n      return _this.getJitter({\n        timings: _classPrivateFieldGet2(_extractLoadedLatencies, _this).call(_this, loadedResults)\n      });\n    });\n    _defineProperty(this, \"getLoadedLatencyPoints\", function (loadedResults) {\n      return _this.getLatencyPoints({\n        timings: _classPrivateFieldGet2(_extractLoadedLatencies, _this).call(_this, loadedResults)\n      });\n    });\n    _defineProperty(this, \"getPacketLoss\", function (plResults) {\n      return plResults.packetLoss;\n    });\n    _defineProperty(this, \"getPacketLossDetails\", function (plResults) {\n      return plResults;\n    });\n    _defineProperty(this, \"getReachability\", function (reachabilityResults) {\n      return !!reachabilityResults.reachable;\n    });\n    _defineProperty(this, \"getReachabilityDetails\", function (d) {\n      return {\n        host: d.host,\n        reachable: d.reachable\n      };\n    });\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config$3, void 0);\n    // Internal methods\n    _classPrivateFieldInitSpec(this, _extractLoadedLatencies, function (loadedResults) {\n      return Object.values(loadedResults).filter(\n      // keep only file sizes that saturated the connection\n      function (d) {\n        return d.timings.length \u0026\u0026 Math.min.apply(Math, _toConsumableArray(d.timings.map(function (d) {\n          return d.duration;\n        }))) \u003e= _classPrivateFieldGet2(_config$3, _this).loadedRequestMinDuration;\n      }).map(function (d) {\n        return d.sideLatency || [];\n      }).flat().slice(-_classPrivateFieldGet2(_config$3, _this).loadedLatencyMaxPoints);\n    });\n    _classPrivateFieldSet2(_config$3, this, config);\n  }\n  return _createClass(MeasurementCalculations, [{\n    key: \"getJitter\",\n    value: function getJitter(latencyResults) {\n      // calc jitter as the average latency delta between consecutive samples\n      var pings = this.getLatencyPoints(latencyResults);\n      return pings.length \u003c 2 ? null : pings.reduce(function (_ref4, latency) {\n        var _ref4$sumDeltas = _ref4.sumDeltas,\n          sumDeltas = _ref4$sumDeltas === void 0 ? 0 : _ref4$sumDeltas,\n          prevLatency = _ref4.prevLatency;\n        return {\n          sumDeltas: sumDeltas + (prevLatency !== undefined ? Math.abs(prevLatency - latency) : 0),\n          prevLatency: latency\n        };\n      }, {}).sumDeltas / (pings.length - 1);\n    }\n\n    // last measurements are most accurate\n  }]);\n}();\n\nvar classificationNames = ['bad', 'poor', 'average', 'good', 'great'];\nvar customResultTypes = {\n  loadedLatencyIncrease: function loadedLatencyIncrease(measurements) {\n    return measurements.latency \u0026\u0026 (measurements.downLoadedLatency || measurements.upLoadedLatency) ? Math.max(measurements.downLoadedLatency, measurements.upLoadedLatency) - measurements.latency : undefined;\n  }\n};\nvar defaultPoints = {\n  packetLoss: 0\n};\nvar _config$2 = /*#__PURE__*/new WeakMap();\nvar ScoresCalculations = /*#__PURE__*/function () {\n  function ScoresCalculations(config) {\n    _classCallCheck(this, ScoresCalculations);\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config$2, void 0);\n    _classPrivateFieldSet2(_config$2, this, config);\n  }\n  return _createClass(ScoresCalculations, [{\n    key: \"getScores\",\n    value: function getScores(measurements) {\n      var scores = Object.assign.apply(Object, _toConsumableArray(Object.entries(_classPrivateFieldGet2(_config$2, this).aimMeasurementScoring).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          type = _ref2[0],\n          fn = _ref2[1];\n        var val = customResultTypes.hasOwnProperty(type) ? customResultTypes[type](measurements) : measurements[type];\n        return val === undefined ? defaultPoints.hasOwnProperty(type) ? _defineProperty({}, type, defaultPoints[type]) : {} : _defineProperty({}, type, val === undefined ? 0 : +fn(val));\n      })));\n      return Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(_classPrivateFieldGet2(_config$2, this).aimExperiencesDefs).filter(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n          input = _ref6[1].input;\n        return input.every(function (k) {\n          return scores.hasOwnProperty(k);\n        });\n      }).map(function (_ref7) {\n        var _ref8 = _slicedToArray(_ref7, 2),\n          k = _ref8[0],\n          _ref8$ = _ref8[1],\n          input = _ref8$.input,\n          pointThresholds = _ref8$.pointThresholds;\n        var sumPoints = Math.max(0, sum(input.map(function (k) {\n          return scores[k];\n        })));\n        var classificationIdx = scaleThreshold(pointThresholds, [0, 1, 2, 3, 4])(sumPoints);\n        var classificationName = classificationNames[classificationIdx];\n        return _defineProperty({}, k, {\n          points: sumPoints,\n          classificationIdx: classificationIdx,\n          classificationName: classificationName\n        });\n      }))));\n    }\n  }]);\n}();\n\nvar _config$1 = /*#__PURE__*/new WeakMap();\nvar _measCalc = /*#__PURE__*/new WeakMap();\nvar _scoresCalc = /*#__PURE__*/new WeakMap();\nvar _calcGetter = /*#__PURE__*/new WeakMap();\nvar _getV4Reachability = /*#__PURE__*/new WeakMap();\nvar _getV4ReachabilityDetails = /*#__PURE__*/new WeakMap();\nvar _getV6Reachability = /*#__PURE__*/new WeakMap();\nvar _getV6ReachabilityDetails = /*#__PURE__*/new WeakMap();\nvar Results = /*#__PURE__*/function () {\n  function Results(config) {\n    var _this = this;\n    _classCallCheck(this, Results);\n    // Public attributes\n    _defineProperty(this, \"raw\", void 0);\n    _defineProperty(this, \"getUnloadedLatency\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLatency', 'latency');\n    });\n    _defineProperty(this, \"getUnloadedJitter\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getJitter', 'latency');\n    });\n    _defineProperty(this, \"getUnloadedLatencyPoints\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLatencyPoints', 'latency', []);\n    });\n    _defineProperty(this, \"getDownLoadedLatency\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLoadedLatency', 'download');\n    });\n    _defineProperty(this, \"getDownLoadedJitter\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLoadedJitter', 'download');\n    });\n    _defineProperty(this, \"getDownLoadedLatencyPoints\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLoadedLatencyPoints', 'download', []);\n    });\n    _defineProperty(this, \"getUpLoadedLatency\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLoadedLatency', 'upload');\n    });\n    _defineProperty(this, \"getUpLoadedJitter\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLoadedJitter', 'upload');\n    });\n    _defineProperty(this, \"getUpLoadedLatencyPoints\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getLoadedLatencyPoints', 'upload', []);\n    });\n    _defineProperty(this, \"getDownloadBandwidth\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getBandwidth', 'download');\n    });\n    _defineProperty(this, \"getDownloadBandwidthPoints\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getBandwidthPoints', 'download', []);\n    });\n    _defineProperty(this, \"getUploadBandwidth\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getBandwidth', 'upload');\n    });\n    _defineProperty(this, \"getUploadBandwidthPoints\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getBandwidthPoints', 'upload', []);\n    });\n    _defineProperty(this, \"getPacketLoss\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getPacketLoss', 'packetLoss');\n    });\n    _defineProperty(this, \"getPacketLossDetails\", function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getPacketLossDetails', 'packetLoss', undefined, true);\n    });\n    _defineProperty(this, \"getScores\", function () {\n      return _classPrivateFieldGet2(_scoresCalc, _this).getScores(_this.getSummary());\n    });\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config$1, void 0);\n    _classPrivateFieldInitSpec(this, _measCalc, void 0);\n    _classPrivateFieldInitSpec(this, _scoresCalc, void 0);\n    // Internal methods\n    _classPrivateFieldInitSpec(this, _calcGetter, function (calcFn, resKey) {\n      var defaultVal = arguments.length \u003e 2 \u0026\u0026 arguments[2] !== undefined ? arguments[2] : undefined;\n      var surfaceError = arguments.length \u003e 3 \u0026\u0026 arguments[3] !== undefined ? arguments[3] : false;\n      return !_this.raw.hasOwnProperty(resKey) || !_this.raw[resKey].started ? defaultVal : surfaceError \u0026\u0026 _this.raw[resKey].error ? {\n        error: _this.raw[resKey].error\n      } : _classPrivateFieldGet2(_measCalc, _this)[calcFn](_this.raw[resKey].results);\n    });\n    _classPrivateFieldInitSpec(this, _getV4Reachability, function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getReachability', 'v4Reachability');\n    });\n    _classPrivateFieldInitSpec(this, _getV4ReachabilityDetails, function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getReachabilityDetails', 'v4Reachability');\n    });\n    _classPrivateFieldInitSpec(this, _getV6Reachability, function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getReachability', 'v6Reachability');\n    });\n    _classPrivateFieldInitSpec(this, _getV6ReachabilityDetails, function () {\n      return _classPrivateFieldGet2(_calcGetter, _this).call(_this, 'getReachabilityDetails', 'v6Reachability');\n    });\n    _classPrivateFieldSet2(_config$1, this, config);\n    this.clear();\n    _classPrivateFieldSet2(_measCalc, this, new MeasurementCalculations(_classPrivateFieldGet2(_config$1, this)));\n    _classPrivateFieldSet2(_scoresCalc, this, new ScoresCalculations(_classPrivateFieldGet2(_config$1, this)));\n  }\n  return _createClass(Results, [{\n    key: \"isFinished\",\n    get: function get() {\n      return Object.values(this.raw).every(function (d) {\n        return d.finished;\n      });\n    }\n\n    // Public methods\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.raw = Object.assign.apply(Object, [{}].concat(_toConsumableArray(_toConsumableArray(new Set(_classPrivateFieldGet2(_config$1, this).measurements.map(function (m) {\n        return m.type;\n      }))).map(function (m) {\n        return _defineProperty({}, m, {\n          started: false,\n          finished: false,\n          results: {}\n        });\n      }))));\n    }\n  }, {\n    key: \"getSummary\",\n    value: function getSummary() {\n      var items = {\n        download: this.getDownloadBandwidth,\n        upload: this.getUploadBandwidth,\n        latency: this.getUnloadedLatency,\n        jitter: this.getUnloadedJitter,\n        downLoadedLatency: this.getDownLoadedLatency,\n        downLoadedJitter: this.getDownLoadedJitter,\n        upLoadedLatency: this.getUpLoadedLatency,\n        upLoadedJitter: this.getUpLoadedJitter,\n        packetLoss: this.getPacketLoss,\n        v4Reachability: _classPrivateFieldGet2(_getV4Reachability, this),\n        v6Reachability: _classPrivateFieldGet2(_getV6Reachability, this)\n      };\n      return Object.assign.apply(Object, _toConsumableArray(Object.entries(items).map(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n          key = _ref3[0],\n          fn = _ref3[1];\n        var val = fn();\n        return val === undefined ? {} : _defineProperty({}, key, val);\n      })));\n    }\n  }]);\n}();\n\nvar round = function round(num) {\n  var decimals = arguments.length \u003e 1 \u0026\u0026 arguments[1] !== undefined ? arguments[1] : 0;\n  return !num ? num : Math.round(num * Math.pow(10, decimals)) / Math.pow(10, decimals);\n};\nvar latencyPointsParser = function latencyPointsParser(durations) {\n  return durations.map(function (d) {\n    return round(d, 2);\n  });\n};\nvar bpsPointsParser = function bpsPointsParser(pnts) {\n  return pnts.map(function (d) {\n    return {\n      bytes: +d.bytes,\n      bps: round(d.bps)\n    };\n  });\n};\nvar packetLossParser = function packetLossParser(d) {\n  return d.error ? undefined : {\n    numMessages: d.numMessagesSent,\n    lossRatio: round(d.packetLoss, 4)\n  };\n};\nvar resultsParsers = {\n  latencyMs: ['getUnloadedLatencyPoints', latencyPointsParser],\n  download: ['getDownloadBandwidthPoints', bpsPointsParser],\n  upload: ['getUploadBandwidthPoints', bpsPointsParser],\n  downLoadedLatencyMs: ['getDownLoadedLatencyPoints', latencyPointsParser],\n  upLoadedLatencyMs: ['getUpLoadedLatencyPoints', latencyPointsParser],\n  packetLoss: ['getPacketLossDetails', packetLossParser]\n  // v4Reachability: ['getV4ReachabilityDetails'],\n  // v6Reachability: ['getV6ReachabilityDetails']\n};\nvar scoreParser = function scoreParser(d) {\n  return {\n    points: d.points,\n    classification: d.classificationName\n  };\n};\nvar logAimResults = function logAimResults(results, _ref) {\n  var apiUrl = _ref.apiUrl;\n  var logData = {};\n  Object.entries(resultsParsers).forEach(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      logK = _ref3[0],\n      _ref3$ = _slicedToArray(_ref3[1], 2),\n      fn = _ref3$[0],\n      _ref3$$ = _ref3$[1],\n      parser = _ref3$$ === void 0 ? function (d) {\n        return d;\n      } : _ref3$$;\n    var val = results[fn]();\n    val \u0026\u0026 (logData[logK] = parser(val));\n  });\n  var scores = results.getScores();\n  scores \u0026\u0026 (logData.scores = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(scores).map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      k = _ref5[0],\n      score = _ref5[1];\n    return _defineProperty({}, k, scoreParser(score));\n  })))));\n  fetch(apiUrl, {\n    method: 'POST',\n    body: JSON.stringify(logData)\n  });\n};\n\nvar _excluded = [\"type\"],\n  _excluded2 = [\"numPackets\"],\n  _excluded3 = [\"bytes\"];\nvar DEFAULT_OPTIMAL_DOWNLOAD_SIZE = 1e6;\nvar DEFAULT_OPTIMAL_UPLOAD_SIZE = 1e6;\nvar OPTIMAL_SIZE_RATIO = 0.5; // of largest size reached in measurement\n\nvar pausableTypes = ['latency', 'latencyUnderLoad', 'download', 'upload'];\nvar genMeasId = function genMeasId() {\n  return \"\".concat(Math.round(Math.random() * 1e16));\n};\nvar _onFinish = /*#__PURE__*/new WeakMap();\nvar _onError = /*#__PURE__*/new WeakMap();\nvar _config = /*#__PURE__*/new WeakMap();\nvar _results = /*#__PURE__*/new WeakMap();\nvar _measurementId = /*#__PURE__*/new WeakMap();\nvar _curMsmIdx = /*#__PURE__*/new WeakMap();\nvar _curEngine = /*#__PURE__*/new WeakMap();\nvar _optimalDownloadChunkSize = /*#__PURE__*/new WeakMap();\nvar _optimalUploadChunkSize = /*#__PURE__*/new WeakMap();\nvar _running = /*#__PURE__*/new WeakMap();\nvar _finished = /*#__PURE__*/new WeakMap();\nvar _MeasurementEngine_brand = /*#__PURE__*/new WeakSet();\nvar MeasurementEngine = /*#__PURE__*/function () {\n  function MeasurementEngine() {\n    var userConfig = arguments.length \u003e 0 \u0026\u0026 arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, MeasurementEngine);\n    // Internal methods\n    _classPrivateMethodInitSpec(this, _MeasurementEngine_brand);\n    _defineProperty(this, \"onRunningChange\", function () {});\n    _defineProperty(this, \"onResultsChange\", function () {});\n    _classPrivateFieldInitSpec(this, _onFinish, function () {});\n    _classPrivateFieldInitSpec(this, _onError, function () {});\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config, void 0);\n    _classPrivateFieldInitSpec(this, _results, void 0);\n    _classPrivateFieldInitSpec(this, _measurementId, genMeasId());\n    _classPrivateFieldInitSpec(this, _curMsmIdx, -1);\n    _classPrivateFieldInitSpec(this, _curEngine, void 0);\n    _classPrivateFieldInitSpec(this, _optimalDownloadChunkSize, DEFAULT_OPTIMAL_DOWNLOAD_SIZE);\n    _classPrivateFieldInitSpec(this, _optimalUploadChunkSize, DEFAULT_OPTIMAL_UPLOAD_SIZE);\n    _classPrivateFieldInitSpec(this, _running, false);\n    _classPrivateFieldInitSpec(this, _finished, false);\n    _classPrivateFieldSet2(_config, this, Object.assign({}, defaultConfig, userConfig, internalConfig));\n    _classPrivateFieldSet2(_results, this, new Results(_classPrivateFieldGet2(_config, this)));\n    _classPrivateFieldGet2(_config, this).autoStart \u0026\u0026 this.play();\n  }\n\n  // Public attributes\n  return _createClass(MeasurementEngine, [{\n    key: \"results\",\n    get: function get() {\n      // read access to results\n      return _classPrivateFieldGet2(_results, this);\n    }\n  }, {\n    key: \"isRunning\",\n    get: function get() {\n      return _classPrivateFieldGet2(_running, this);\n    }\n  }, {\n    key: \"isFinished\",\n    get: function get() {\n      return _classPrivateFieldGet2(_finished, this);\n    }\n  }, {\n    key: \"onFinish\",\n    set:\n    // callback invoked when all the measurements are finished\n    function set(f) {\n      _classPrivateFieldSet2(_onFinish, this, f);\n    }\n  }, {\n    key: \"onError\",\n    set:\n    // callback invoked if an error occurs during measurement\n    function set(f) {\n      _classPrivateFieldSet2(_onError, this, f);\n    }\n\n    // Public methods\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      pausableTypes.includes(_assertClassBrand(_MeasurementEngine_brand, this, _curType).call(this)) \u0026\u0026 _classPrivateFieldGet2(_curEngine, this).pause();\n      _assertClassBrand(_MeasurementEngine_brand, this, _setRunning).call(this, false);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!_classPrivateFieldGet2(_running, this)) {\n        _assertClassBrand(_MeasurementEngine_brand, this, _setRunning).call(this, true);\n        _assertClassBrand(_MeasurementEngine_brand, this, _next).call(this);\n      }\n    }\n  }, {\n    key: \"restart\",\n    value: function restart() {\n      _assertClassBrand(_MeasurementEngine_brand, this, _clear).call(this);\n      this.play();\n    }\n  }]);\n}();\nfunction _setRunning(running) {\n  if (running !== _classPrivateFieldGet2(_running, this)) {\n    _classPrivateFieldSet2(_running, this, running);\n    this.onRunningChange(_classPrivateFieldGet2(_running, this));\n  }\n}\nfunction _setFinished(finished) {\n  var _this3 = this;\n  if (finished !== _classPrivateFieldGet2(_finished, this)) {\n    _classPrivateFieldSet2(_finished, this, finished);\n    finished \u0026\u0026 setTimeout(function () {\n      return _classPrivateFieldGet2(_onFinish, _this3).call(_this3, _this3.results);\n    });\n  }\n}\nfunction _curType() {\n  return _classPrivateFieldGet2(_curMsmIdx, this) \u003c 0 || _classPrivateFieldGet2(_curMsmIdx, this) \u003e= _classPrivateFieldGet2(_config, this).measurements.length ? null : _classPrivateFieldGet2(_config, this).measurements[_classPrivateFieldGet2(_curMsmIdx, this)].type;\n}\nfunction _curTypeResults() {\n  return _classPrivateFieldGet2(_results, this).raw[_assertClassBrand(_MeasurementEngine_brand, this, _curType).call(this)] || undefined;\n}\nfunction _clear() {\n  _assertClassBrand(_MeasurementEngine_brand, this, _destroyCurEngine).call(this);\n  _classPrivateFieldSet2(_measurementId, this, genMeasId());\n  _classPrivateFieldSet2(_curMsmIdx, this, -1);\n  _classPrivateFieldSet2(_curEngine, this, undefined);\n  _assertClassBrand(_MeasurementEngine_brand, this, _setRunning).call(this, false);\n  _assertClassBrand(_MeasurementEngine_brand, this, _setFinished).call(this, false);\n  _classPrivateFieldGet2(_results, this).clear();\n}\nfunction _destroyCurEngine() {\n  var engine = _classPrivateFieldGet2(_curEngine, this);\n  if (!engine) return;\n  engine.onFinished = engine.onConnectionError = engine.onFail = engine.onMsgReceived = engine.onCredentialsFailure = engine.onMeasurementResult = function () {};\n  pausableTypes.includes(_assertClassBrand(_MeasurementEngine_brand, this, _curType).call(this)) \u0026\u0026 engine.pause();\n}\nfunction _next() {\n  var _this4 = this;\n  var _this$curMsmIdx;\n  if (pausableTypes.includes(_assertClassBrand(_MeasurementEngine_brand, this, _curType).call(this)) \u0026\u0026 _assertClassBrand(_MeasurementEngine_brand, this, _curTypeResults).call(this) \u0026\u0026 _assertClassBrand(_MeasurementEngine_brand, this, _curTypeResults).call(this).started \u0026\u0026 !_assertClassBrand(_MeasurementEngine_brand, this, _curTypeResults).call(this).finished \u0026\u0026 !_assertClassBrand(_MeasurementEngine_brand, this, _curTypeResults).call(this).finishedCurrentRound \u0026\u0026 !_assertClassBrand(_MeasurementEngine_brand, this, _curTypeResults).call(this).error) {\n    _classPrivateFieldGet2(_curEngine, this).play();\n    return;\n  }\n\n  // advance to next msm\n  _classPrivateFieldSet2(_curMsmIdx, this, (_this$curMsmIdx = _classPrivateFieldGet2(_curMsmIdx, this), _this$curMsmIdx++, _this$curMsmIdx));\n  if (_classPrivateFieldGet2(_curMsmIdx, this) \u003e= _classPrivateFieldGet2(_config, this).measurements.length) {\n    // done with measurements\n    _assertClassBrand(_MeasurementEngine_brand, this, _setRunning).call(this, false);\n    _assertClassBrand(_MeasurementEngine_brand, this, _setFinished).call(this, true);\n    return;\n  }\n  var _classPrivateFieldGet2$1 = _classPrivateFieldGet2(_config, this).measurements[_classPrivateFieldGet2(_curMsmIdx, this)],\n    type = _classPrivateFieldGet2$1.type,\n    msmConfig = _objectWithoutProperties(_classPrivateFieldGet2$1, _excluded);\n  var msmResults = _assertClassBrand(_MeasurementEngine_brand, this, _curTypeResults).call(this);\n  var _classPrivateFieldGet3 = _classPrivateFieldGet2(_config, this),\n    downloadApiUrl = _classPrivateFieldGet3.downloadApiUrl,\n    uploadApiUrl = _classPrivateFieldGet3.uploadApiUrl,\n    estimatedServerTime = _classPrivateFieldGet3.estimatedServerTime;\n  var engine;\n  switch (type) {\n    case 'v4Reachability':\n    case 'v6Reachability':\n      engine = new ReachabilityEngine(\"https://\".concat(msmConfig.host), {\n        fetchOptions: {\n          method: 'GET',\n          mode: 'no-cors'\n        }\n      });\n      engine.onFinished = function (result) {\n        msmResults.finished = true;\n        msmResults.results = _objectSpread2({\n          host: msmConfig.host\n        }, result);\n        _this4.onResultsChange({\n          type: type\n        });\n        _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      break;\n    case 'rpki':\n      engine = new ReachabilityEngine(\"https://\".concat(_classPrivateFieldGet2(_config, this).rpkiInvalidHost), {\n        timeout: 5000\n      });\n      engine.onFinished = function (result) {\n        (result.response ? result.response.json() : Promise.resolve()).then(function (response) {\n          msmResults.finished = true;\n          msmResults.results = _objectSpread2({\n            host: _classPrivateFieldGet2(_config, _this4).rpkiInvalidHost,\n            filteringInvalids: !result.reachable\n          }, response ? {\n            asn: response.asn,\n            name: response.name\n          } : {});\n          _this4.onResultsChange({\n            type: type\n          });\n          _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n        });\n      };\n      break;\n    case 'nxdomain':\n      engine = new ReachabilityEngine(\"https://\".concat(msmConfig.nxhost), {\n        fetchOptions: {\n          mode: 'no-cors'\n        }\n      });\n      engine.onFinished = function (result) {\n        msmResults.finished = true;\n        msmResults.results = {\n          host: msmConfig.nxhost,\n          reachable: result.reachable\n        };\n        _this4.onResultsChange({\n          type: type\n        });\n        _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      break;\n    case 'packetLoss':\n    case 'packetLossUnderLoad':\n      {\n        msmResults.finished = false;\n        var numMsgs = msmConfig.numPackets,\n          ptCfg = _objectWithoutProperties(msmConfig, _excluded2);\n        var _classPrivateFieldGet4 = _classPrivateFieldGet2(_config, this),\n          turnServerUri = _classPrivateFieldGet4.turnServerUri,\n          turnServerCredsApi = _classPrivateFieldGet4.turnServerCredsApiUrl,\n          turnServerUser = _classPrivateFieldGet4.turnServerUser,\n          turnServerPass = _classPrivateFieldGet4.turnServerPass,\n          includeCredentials = _classPrivateFieldGet4.includeCredentials;\n        engine = new PacketLossUnderLoadEngine(_objectSpread2({\n          turnServerUri: turnServerUri,\n          turnServerCredsApi: turnServerCredsApi,\n          turnServerCredsApiIncludeCredentials: includeCredentials,\n          turnServerUser: turnServerUser,\n          turnServerPass: turnServerPass,\n          numMsgs: numMsgs,\n          // if under load\n          downloadChunkSize: msmConfig.loadDown ? _classPrivateFieldGet2(_optimalDownloadChunkSize, this) : undefined,\n          uploadChunkSize: msmConfig.loadUp ? _classPrivateFieldGet2(_optimalUploadChunkSize, this) : undefined,\n          downloadApiUrl: downloadApiUrl,\n          uploadApiUrl: uploadApiUrl\n        }, ptCfg));\n      }\n      engine.onMsgReceived = function () {\n        msmResults.results = Object.assign({}, engine.results);\n        _this4.onResultsChange({\n          type: type\n        });\n      };\n      engine.onFinished = function () {\n        msmResults.finished = true;\n        _this4.onResultsChange({\n          type: type\n        });\n        _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      engine.onConnectionError = function (e) {\n        msmResults.error = e;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet2(_onError, _this4).call(_this4, \"Connection error while measuring packet loss: \".concat(e));\n        _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      engine.onCredentialsFailure = function () {\n        msmResults.error = 'unable to get turn server credentials';\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet2(_onError, _this4).call(_this4, 'Error while measuring packet loss: unable to get turn server credentials.');\n        _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      break;\n    case 'latency':\n    case 'latencyUnderLoad':\n      msmResults.finished = false;\n      engine = new LoggingBandwidthEngine([{\n        dir: 'down',\n        bytes: 0,\n        count: msmConfig.numPackets,\n        bypassMinDuration: true\n      }], {\n        downloadApiUrl: downloadApiUrl,\n        uploadApiUrl: uploadApiUrl,\n        estimatedServerTime: estimatedServerTime,\n        logApiUrl: _classPrivateFieldGet2(_config, this).logMeasurementApiUrl,\n        measurementId: _classPrivateFieldGet2(_measurementId, this),\n        // if under load\n        downloadChunkSize: msmConfig.loadDown ? _classPrivateFieldGet2(_optimalDownloadChunkSize, this) : undefined,\n        uploadChunkSize: msmConfig.loadUp ? _classPrivateFieldGet2(_optimalUploadChunkSize, this) : undefined\n      });\n      engine.fetchOptions = {\n        credentials: _classPrivateFieldGet2(_config, this).includeCredentials ? 'include' : undefined\n      };\n      engine.onMeasurementResult = engine.onNewMeasurementStarted = function (meas, results) {\n        msmResults.results = Object.assign({}, results.down[0]);\n        _this4.onResultsChange({\n          type: type\n        });\n      };\n      engine.onFinished = function () {\n        msmResults.finished = true;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet2(_running, _this4) \u0026\u0026 _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      engine.onConnectionError = function (e) {\n        msmResults.error = e;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet2(_onError, _this4).call(_this4, \"Connection error while measuring latency: \".concat(e));\n        _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n      };\n      engine.play();\n      break;\n    case 'download':\n    case 'upload':\n      if (msmResults.finished || msmResults.error) {\n        _assertClassBrand(_MeasurementEngine_brand, this, _next).call(this); // skip, already concluded this bandwidth measurement type\n      } else {\n        delete msmResults.finishedCurrentRound;\n        var measureParallelLatency = _classPrivateFieldGet2(_config, this)[\"measure\".concat(type === 'download' ? 'Down' : 'Up', \"loadLoadedLatency\")];\n        engine = new LoggingBandwidthEngine([_objectSpread2({\n          dir: type === 'download' ? 'down' : 'up'\n        }, msmConfig)], {\n          downloadApiUrl: downloadApiUrl,\n          uploadApiUrl: uploadApiUrl,\n          estimatedServerTime: estimatedServerTime,\n          logApiUrl: _classPrivateFieldGet2(_config, this).logMeasurementApiUrl,\n          measurementId: _classPrivateFieldGet2(_measurementId, this),\n          measureParallelLatency: measureParallelLatency,\n          parallelLatencyThrottleMs: _classPrivateFieldGet2(_config, this).loadedLatencyThrottle\n        });\n        engine.fetchOptions = {\n          credentials: _classPrivateFieldGet2(_config, this).includeCredentials ? 'include' : undefined\n        };\n        engine.finishRequestDuration = _classPrivateFieldGet2(_config, this).bandwidthFinishRequestDuration;\n        engine.onNewMeasurementStarted = function (_ref) {\n          var count = _ref.count,\n            bytes = _ref.bytes;\n          var res = msmResults.results = Object.assign({}, msmResults.results);\n          !res.hasOwnProperty(bytes) \u0026\u0026 (res[bytes] = {\n            timings: [],\n            numMeasurements: 0,\n            sideLatency: measureParallelLatency ? [] : undefined\n          });\n\n          // check if count hasn't already been added\n          if (res[bytes].numMeasurements - res[bytes].timings.length !== count) {\n            res[bytes].numMeasurements += count;\n            _this4.onResultsChange({\n              type: type\n            });\n          }\n        };\n        engine.onMeasurementResult = function (_ref2) {\n          var bytes = _ref2.bytes,\n            timing = _objectWithoutProperties(_ref2, _excluded3);\n          // merge in new result\n          msmResults.results[bytes].timings.push(timing);\n          msmResults.results = Object.assign({}, msmResults.results);\n          _this4.onResultsChange({\n            type: type\n          });\n        };\n        engine.onParallelLatencyResult = function (res) {\n          // merge in new latency result\n          msmResults.results[msmConfig.bytes].sideLatency.push(res);\n          msmResults.results = Object.assign({}, msmResults.results);\n          _this4.onResultsChange({\n            type: type\n          });\n        };\n        engine.onFinished = function (results) {\n          var isLastMsmOfType = !_classPrivateFieldGet2(_config, _this4).measurements.slice(_classPrivateFieldGet2(_curMsmIdx, _this4) + 1).map(function (d) {\n            return d.type;\n          }).includes(type);\n          var minDuration = Math.min.apply(Math, _toConsumableArray(Object.values(type === 'download' ? results.down : results.up).slice(-1)[0].timings.map(function (d) {\n            return d.duration;\n          })));\n          var reachedEndOfMsmType = isLastMsmOfType || !msmConfig.bypassMinDuration \u0026\u0026 minDuration \u003e _classPrivateFieldGet2(_config, _this4).bandwidthFinishRequestDuration;\n          if (!reachedEndOfMsmType) {\n            msmResults.finishedCurrentRound = true;\n          } else {\n            msmResults.finished = true;\n            _this4.onResultsChange({\n              type: type\n            });\n\n            // record optimal load size\n            var largestSize = Object.keys(msmResults.results).map(function (n) {\n              return +n;\n            }).sort(function (a, b) {\n              return b - a;\n            })[0];\n            var optimalSize = largestSize * OPTIMAL_SIZE_RATIO;\n            type === 'download' \u0026\u0026 _classPrivateFieldSet2(_optimalDownloadChunkSize, _this4, optimalSize);\n            type === 'upload' \u0026\u0026 _classPrivateFieldSet2(_optimalUploadChunkSize, _this4, optimalSize);\n          }\n          _classPrivateFieldGet2(_running, _this4) \u0026\u0026 _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n        };\n        engine.onConnectionError = function (e) {\n          msmResults.error = e;\n          _this4.onResultsChange({\n            type: type\n          });\n          _classPrivateFieldGet2(_onError, _this4).call(_this4, \"Connection error while measuring \".concat(type, \": \").concat(e));\n          _assertClassBrand(_MeasurementEngine_brand, _this4, _next).call(_this4);\n        };\n        engine.play();\n      }\n      break;\n  }\n  _classPrivateFieldSet2(_curEngine, this, engine);\n  msmResults.started = true;\n  this.onResultsChange({\n    type: type\n  });\n}\nvar _logAimApiUrl = /*#__PURE__*/new WeakMap();\nvar _logFinalResults = /*#__PURE__*/new WeakMap();\nvar LoggingMeasurementEngine = /*#__PURE__*/function (_MeasurementEngine2) {\n  function LoggingMeasurementEngine(userConfig) {\n    var _this;\n    _classCallCheck(this, LoggingMeasurementEngine);\n    for (var _len = arguments.length, pt = new Array(_len \u003e 1 ? _len - 1 : 0), _key = 1; _key \u003c _len; _key++) {\n      pt[_key - 1] = arguments[_key];\n    }\n    _this = _callSuper(this, LoggingMeasurementEngine, [userConfig].concat(pt));\n    // Internal state\n    _classPrivateFieldInitSpec(_this, _logAimApiUrl, void 0);\n    // Internal methods\n    _classPrivateFieldInitSpec(_this, _logFinalResults, function (results) {\n      _classPrivateFieldGet2(_logAimApiUrl, _this) \u0026\u0026 logAimResults(results, {\n        apiUrl: _classPrivateFieldGet2(_logAimApiUrl, _this)\n      });\n    });\n    _superPropSet((LoggingMeasurementEngine), \"onFinish\", _classPrivateFieldGet2(_logFinalResults, _this), _this, 1);\n    _classPrivateFieldSet2(_logAimApiUrl, _this, Object.assign({}, defaultConfig, userConfig, internalConfig).logAimApiUrl);\n    return _this;\n  }\n\n  // Public attributes\n  _inherits(LoggingMeasurementEngine, _MeasurementEngine2);\n  return _createClass(LoggingMeasurementEngine, [{\n    key: \"onFinish\",\n    set: function set(onFinish) {\n      var _this2 = this;\n      _superPropSet(LoggingMeasurementEngine, \"onFinish\", function (results) {\n        onFinish(results);\n        _classPrivateFieldGet2(_logFinalResults, _this2).call(_this2, results);\n      }, this, 1);\n    }\n  }]);\n}(MeasurementEngine);\n\nexport { LoggingMeasurementEngine as default };\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a \u003c b ? -1 : a \u003e b ? 1 : a \u003e= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b \u003c a ? -1\n    : b \u003e a ? 1\n    : b \u003e= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We can’t do this\n  // for a comparator (except for specific, known comparators) because we can’t\n  // tell if the comparator is symmetric, and an asymmetric comparator can’t be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) =\u003e ascending(f(d), x);\n    delta = (d, x) =\u003e f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo \u003c hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) \u003e\u003e\u003e 1;\n        if (compare2(a[mid], x) \u003c 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo \u003c hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo \u003c hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) \u003e\u003e\u003e 1;\n        if (compare2(a[mid], x) \u003c= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo \u003c hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i \u003e lo \u0026\u0026 delta(a[i - 1], x) \u003e -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null \u0026\u0026 (value = +value) \u003e= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null \u0026\u0026 (value = +value) \u003e= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {bisect} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x != null \u0026\u0026 x \u003c= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n"],"version":3}
